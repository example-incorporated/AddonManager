function Ve(e){window.enmity.plugins.registerPlugin(e)}function F(e){return window.enmity.plugins.getPlugin(e)}function Q(){return window.enmity.plugins.getPlugins()}const m=window.enmity.modules.common.Constants;window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets,window.enmity.modules.common.Messages,window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const t=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage;const N=window.enmity.modules.common.Toasts;window.enmity.modules.common.Dialog;const Ke=window.enmity.modules.common.Token,U=window.enmity.modules.common.REST;window.enmity.modules.common.Settings,window.enmity.modules.common.Users;const ee=window.enmity.modules.common.Navigation,ze=window.enmity.modules.common.NavigationNative,ie=window.enmity.modules.common.NavigationStack;window.enmity.modules.common.Theme;const te=window.enmity.modules.common.Linking,C=window.enmity.modules.common.StyleSheet;window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux;const j=window.enmity.modules.common.SVG;window.enmity.modules.common.Scenes,window.enmity.modules.common.Moment;function Xe(e){return window.enmity.patcher.create(e)}var h="AddonManager",we="1.1.3",We="Manage plugins & themes easily!",Je=[{name:"mafu",id:"519760564755365888"}],qe="#00ffff",Ze={name:h,version:we,description:We,authors:Je,color:qe};function f(e,n,r){window.enmity.settings.set(e,n,r)}function A(e,n,r){return window.enmity.settings.get(e,n,r)}const H="https://raw.githubusercontent.com/m4fn3/AddonManagerDatabase/master/",Qe=H+"plugins.json",et=H+"themes.json",tt=H+"plugins_update.txt",nt=H+"themes_update.txt",ot=H+"compatibility.json";function G(e){return`${e}?${Date.now()}`}function rt(e,n){return`${H}${e}s/${n}.json`}function ce(e){try{return JSON.parse(A(h,e,"{}").toString())}catch{return{}}}function Y(){return ce("plugins")}function X(){return ce("themes")}function at(){return ce("compatibility")}function ye(){U.get(G(Qe)).then(e=>{f(h,"plugins",e.text)})}function fe(){U.get(G(et)).then(e=>{f(h,"themes",e.text)})}function lt(){U.get(G(tt)).then(e=>{let n=e.text,r=A(h,"plugins_ver");r?r!=n&&(f(h,"plugins_ver",n),ye()):(f(h,"plugins_ver",n),ye())})}function it(){U.get(G(nt)).then(e=>{let n=e.text,r=A(h,"themes_ver");r?r!=n&&(f(h,"themes_ver",n),fe()):(f(h,"themes_ver",n),fe())})}function T(e){return window.enmity.assets.getIDByName(e)}function W(...e){return window.enmity.modules.getByProps(...e)}function Se(...e){return window.enmity.modules.getByName(...e)}function ct(...e){return window.enmity.modules.getByKeyword(...e)}window.enmity.modules.common;const st=Se("Icon"),J=ct("getFocusedRoute"),be=Se("StaticSearchBarContainer"),dt=W("acceptInviteAndTransitionToInviteChannel"),mt=W("AppState"),ut=W("DRMType","FilterType").default,ve=W("setString"),g={Copy:T("ic_message_copy"),GitHub:T("img_account_sync_github_white"),Twitter:T("img_account_sync_twitter_white"),Discord:T("Discord"),Update:T("toast_image_saved"),Export:T("ic_reply_24px"),Import:T("ic_leave_stage"),Fail:T("Small"),Download:T("ic_download_24px"),Check:T("ic_check_24px"),Clear:T("ic_input_clear_24px"),Uninstall:T("ic_trash_24px")},q=C.createThemedStyleSheet({cardStyle:{backgroundColor:m.ThemeColorMap.BACKGROUND_MOBILE_PRIMARY,color:m.ThemeColorMap.TEXT_NORMAL},header:{backgroundColor:m.ThemeColorMap.BACKGROUND_MOBILE_SECONDARY,shadowColor:"transparent",elevation:0},headerText:{color:m.ThemeColorMap.HEADER_PRIMARY}}),gt={cardStyle:q.cardStyle,headerStyle:q.header,headerTitleContainerStyle:q.headerText,headerTitleStyle:q.headerText,headerBackTitleStyle:q.headerText,headerBackImage:()=>t.createElement(st,{source:T("ios-back")}),headerTitleAlign:"center",safeAreaInsets:{top:0}};function ht(e,n,r,o=186){let s=e.replace("#","");const u=(a,i,p)=>parseInt(a.substring(i[0],i[1]),p),E=u(s,[0,2],16),w=u(s,[2,4],16),S=u(s,[4,6],16);return(E+w+S)/(255*3)>o?r:n}function V(e,n,r=()=>{}){window.enmity.plugins.installPlugin(n,o=>{o.name===void 0?N.open({content:`Failed to install ${e}`,source:g.Fail}):(N.open({content:`Successfully installed ${e}!`,source:g.Check}),r())})}function se(e,n=()=>{}){window.enmity.plugins.uninstallPlugin(e,r=>{N.open({content:`Successfully uninstalled ${e}!`,source:g.Check}),n()})}function ne(e,n,r=()=>{}){window.enmity.themer.installTheme(n,o=>{N.open({content:`Successfully installed ${e}!`,source:g.Check}),r()})}function pt(e,n=()=>{}){window.enmity.themer.uninstallTheme(e,r=>{N.open({content:`Successfully uninstalled ${e}!`,source:g.Check}),n()})}function K(e){return window.enmity.themer.getThemeByName(e)}function oe(){return window.enmity.themer.listThemes()}function Et(e){try{let n=K(window.enmity.themer.getTheme());return n?n.colours[e]:void 0}catch{return}}function re(e,n){let r=de("plugin");r.push(n),f(h,`_updated_${e}s`,JSON.stringify(r))}function wt(e){f(h,`_updated_${e}s`,"[]")}function de(e){return JSON.parse(A(h,`_updated_${e}s`,"[]").toString())}function yt(){let e=A(h,"check_updates");if(e===void 0)f(h,"check_updates",!1);else if(e){const n=Y(),r=X();let o=ue(n),s=ge(r);if(o.length||s.length){let u=o.concat(s).join(", ");N.open({content:`Updates are available for ${u}`,source:g.Download})}}}function me(e,n){return n.localeCompare(e,void 0,{numeric:!0})}function Te(e,n){return me(e,n)===1}function ue(e){return Q().map(n=>n.name).filter(n=>Object.keys(e).includes(n)&&Object.keys(e[n]).includes("version")&&F(n).version&&Te(F(n).version,e[n].version))}function ge(e){return oe().map(n=>n.name).filter(n=>Object.keys(e).includes(n)&&Object.keys(e[n]).includes("version")&&K(n).version&&Te(K(n).version,e[n].version))}const{components:d}=window.enmity;d.Alert;const Re=d.Button,ft=d.FlatList,Ce=d.Image;d.ImageBackground,d.KeyboardAvoidingView,d.Modal,d.Pressable,d.RefreshControl;const $=d.ScrollView;d.SectionList,d.StatusBar,d.StyleSheet,d.Switch;const M=d.Text,St=d.TextInput;d.TouchableHighlight;const bt=d.TouchableOpacity;d.TouchableWithoutFeedback,d.Touchable;const he=d.View;d.VirtualizedList,d.Form,d.FormArrow,d.FormCTA,d.FormCTAButton,d.FormCardSection,d.FormCheckbox,d.FormDivider,d.FormHint,d.FormIcon,d.FormInput,d.FormLabel,d.FormRadio;const l=d.FormRow,P=d.FormSection;d.FormSelect,d.FormSubLabel;const _e=d.FormSwitch;d.FormTernaryCheckBox,d.FormText,d.FormTextColors,d.FormTextSizes;function Ie(){let e=Q().map(r=>r.name).join(";"),n=oe().map(r=>r.name).join(";");return`${e}|${n}`}function Me(){const e=C.createThemedStyleSheet({container:{flex:1,backgroundColor:m.ThemeColorMap.BACKGROUND_PRIMARY}}),[n,r]=t.useState(Boolean(A(h,"auto_backup")));return t.createElement($,{style:e.container},t.createElement(P,{title:"EXPORT"},t.createElement(l,{label:"Automatically create backup",subLabel:"Automatically save backup of installed addons. It will be linked with your discord account.",leading:t.createElement(l.Icon,{source:g.Export}),trailing:t.createElement(_e,{value:n,onValueChange:o=>{r(o),f(h,"auto_backup",o)}})})),t.createElement(P,{title:"ADVANCED"},t.createElement(l,{label:"Export addons as text",subLabel:"Export installed addons as text that you can import manually.",leading:t.createElement(l.Icon,{source:g.Copy}),trailing:l.Arrow,onPress:()=>{ve.setString(Ie()),N.open({content:"Copied addon list to clipboard!",source:g.Copy})}})))}const vt=W("updateNote");async function Tt(e){let n=await(await fetch(`https://discord.com/api/v9/users/@me/notes/${e}`,{method:"GET",credentials:"include",headers:{authorization:Ke.getToken()}})).json();return Object.keys(n).includes("note")?n.note:""}function Rt(e,n){vt.updateNote(e,n)}te.addEventListener("url",e=>{let n=e.url;n=decodeURIComponent(n.replace("com.hammerandchisel.discord://",""));try{const r=JSON.parse(n);A(h,"auto_backup")&&typeof r.data=="string"&&["installed_theme","overridden_theme","installed_plugin","overridden_plugin"].includes(r.data)&&Rt("1048982327809818706",Ie())}catch{return}});function Pe({height:e,width:n,...r}){const o=C.createThemedStyleSheet({icon:{color:m.ThemeColorMap.INTERACTIVE_NORMAL,opacity:.75,marginLeft:.5}});return t.createElement(j.Svg,{viewBox:"0 0 24 24",style:{height:e,width:n,...o.icon},fill:"currentColor",...r},t.createElement(j.Path,{d:"M0 0h24v24H0z",fill:"none"}),t.createElement(j.Path,{d:"M20.5 11H19V7c0-1.1-.9-2-2-2h-4V3.5C13 2.12 11.88 1 10.5 1S8 2.12 8 3.5V5H4c-1.1 0-1.99.9-1.99 2v3.8H3.5c1.49 0 2.7 1.21 2.7 2.7s-1.21 2.7-2.7 2.7H2V20c0 1.1.9 2 2 2h3.8v-1.5c0-1.49 1.21-2.7 2.7-2.7 1.49 0 2.7 1.21 2.7 2.7V22H17c1.1 0 2-.9 2-2v-4h1.5c1.38 0 2.5-1.12 2.5-2.5S21.88 11 20.5 11z"}))}function Ne({height:e,width:n,...r}){const o=C.createThemedStyleSheet({icon:{color:m.ThemeColorMap.INTERACTIVE_NORMAL,opacity:.75,marginLeft:.5}});return t.createElement(j.Svg,{viewBox:"0 0 24 24",style:{height:e,width:n,...o.icon},fill:"currentColor",...r},t.createElement(j.Path,{d:"M0 0h24v24H0z",fill:"none"}),t.createElement(j.Path,{d:"M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8zm-5.5 9c-.83 0-1.5-.67-1.5-1.5S5.67 9 6.5 9 8 9.67 8 10.5 7.33 12 6.5 12zm3-4C8.67 8 8 7.33 8 6.5S8.67 5 9.5 5s1.5.67 1.5 1.5S10.33 8 9.5 8zm5 0c-.83 0-1.5-.67-1.5-1.5S13.67 5 14.5 5s1.5.67 1.5 1.5S15.33 8 14.5 8zm3 4c-.83 0-1.5-.67-1.5-1.5S16.67 9 17.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"}))}const{native:ae}=window.enmity,pe=ae.version;ae.build,ae.device,ae.version;var Ae=({content:e,addonType:n,addonName:r})=>{const o=C.createThemedStyleSheet({hyperLink:{color:m.ThemeColorMap.TEXT_LINK}});return e.replace(/(\bhttps?:\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*)/ig,"<l>$1<l>").split("<l>").map(s=>s.startsWith("http")?t.createElement(M,{style:o.hyperLink,onPress:()=>{let u=n=="plugin"?".js":".json";s.endsWith(u)?n=="plugin"?V(r,s):ne(r,s):te.openURL(s)},onLongPress:()=>{ve.setString(s),N.open({content:"Copied URL to clipboard",source:g.Copy})}},s):t.createElement(M,null,s))};function z({addonType:e}){let n=Et("PRIMARY_DARK_500"),r=n?ht(n,m.ThemeColorMap.TEXT_NORMAL[0],m.ThemeColorMap.TEXT_NORMAL[1]):m.ThemeColorMap.HEADER_PRIMARY;n=n||m.ThemeColorMap.BACKGROUND_SECONDARY;const o=C.createThemedStyleSheet({container:{flex:1,backgroundColor:m.ThemeColorMap.BACKGROUND_PRIMARY,padding:10},previews:{marginTop:20,justifyContent:"center"},addonName:{color:m.ThemeColorMap.TEXT_NORMAL,fontFamily:m.Fonts.PRIMARY_SEMIBOLD,fontSize:20},addonText:{borderBottomWidth:1,borderBottomColor:m.ThemeColorMap.HEADER_PRIMARY,paddingBottom:20},sectionTitle:{marginTop:20,marginLeft:15,color:m.ThemeColorMap.HEADER_PRIMARY},sectionContent:{margin:10,borderRadius:10,borderWidth:1,borderColor:m.ThemeColorMap.HEADER_PRIMARY,color:m.ThemeColorMap.TEXT_NORMAL,padding:10},addonEdit:{backgroundColor:n,paddingTop:10,paddingBottom:10,borderRadius:20,borderWidth:1,width:80,alignItems:"center",borderColor:n,overflow:"hidden"},addonEditText:{color:r,fontFamily:m.Fonts.PRIMARY_SEMIBOLD},hyperLink:{color:m.ThemeColorMap.TEXT_LINK}}),s=mt.useWindowDimensions().width,[u,E]=t.useState("Loading description..."),[w,S]=t.useState([]),a=A(h,`_selected_${e}`).toString(),i=e=="plugin"?Y():X(),p=i[a];let x=e=="plugin"?ue(i):ge(i),k=e=="plugin"?Boolean(F(a)):Boolean(K(a)),D=x.includes(a);const[c,b]=t.useState(D),[le,B]=t.useState(k?c?"UPDATE":"REMOVE":"GET"),[O,Ye]=t.useState(void 0);return t.useEffect(()=>{U.get(G(rt(e,a))).then(v=>{let y=JSON.parse(v.text);E(y.description);let _=Object.assign(y.images.map(I=>({url:I,width:1,height:1,type:"image"})),y.videos.map(I=>({url:I,width:null,height:null,type:"video"})));S(_)}).catch(v=>{v.status===404&&E("No description.")});const R=at();if(a in R[e]){let v=!0;if(R[e][a].ver.includes("~")){let y=R[e][a].ver.split("~"),_=y[0]?y[0]:"0.0",I=y[1]?y[1]:"999.0";me(_,pe)>=0&&me(pe,I)>=0&&(v=!1)}v&&Ye(R[e][a].text+`

Compatibility: ${R[e][a].ver} (currently on ${pe})`)}},[]),t.createElement($,{style:o.container},t.createElement(l,{style:o.addonText,label:()=>t.createElement(M,{style:o.addonName},a),leading:e=="plugin"?t.createElement(Pe,{width:32,height:32}):t.createElement(Ne,{width:32,height:32}),trailing:t.createElement(bt,{style:o.addonEdit,onPress:()=>{e=="plugin"?F(a)&&!c?se(a,()=>B("GET")):V(a,p.url,()=>{b(!1),re(e,a),B("REMOVE")}):K(a)&&!c?pt(a,()=>B("GET")):ne(a,p.url,()=>{b(!1),re(e,a),B("REMOVE")})}},t.createElement(M,{style:o.addonEditText},le)),subLabel:p.description}),[1].filter(R=>Boolean(O)).map(R=>t.createElement(t.Fragment,null,t.createElement(M,{style:[o.sectionTitle,{color:"#e74c3c",fontFamily:m.Fonts.PRIMARY_SEMIBOLD}]},"Notice"),t.createElement(M,{style:[o.sectionContent,{borderColor:"#e74c3c"}]},t.createElement(Ae,{content:O,addonType:e,addonName:a})))),t.createElement(ft,{horizontal:!0,data:w,style:o.previews,renderItem:({index:R,item:v})=>{if(v.type=="image")return t.createElement(Ce,{style:{width:v.width,height:v.height,margin:5},source:{uri:v.url},onLoad:({nativeEvent:{source:{width:y,height:_}}})=>{let I=y/_;y=I<1?s*2/5:s*2/3,_=y/I;let L=Object.assign([],w);L[R].width=y,L[R].height=_,S(L)}});if(v.type=="video")return t.createElement(ut,{style:{width:v.width,height:v.height},source:{uri:v.url},controls:!0,paused:!0,onLoad:({naturalSize:{width:y,height:_}})=>{let I=y/_;y=I<1?s*2/5:s*2/3,_=y/I;let L=Object.assign([],w);L[R].width=y,L[R].height=_,S(L)}})},showsHorizontalScrollIndicator:!0}),t.createElement(M,{style:o.sectionTitle},"Description"),t.createElement(M,{style:o.sectionContent},t.createElement(Ae,{content:u,addonType:e,addonName:a})))}function xe({isSetting:e=!1,renderPage:n=null}){const r=C.createThemedStyleSheet({container:{flex:1,backgroundColor:m.ThemeColorMap.BACKGROUND_PRIMARY}}),o=J.useNavigation(),s=Y(),[u,E]=t.useState(""),[w,S]=t.useState(Q().map(a=>a.name));return t.createElement(t.Fragment,null,t.createElement(be,{placeholder:"Search plugins",onChangeText:a=>E(a)}),t.createElement($,{style:r.container},Object.keys(s).sort().filter(a=>a.toLowerCase().includes(u.toLowerCase())).map(a=>t.createElement(l,{label:s[a].version?`${a} - v${s[a].version}`:a,subLabel:s[a].description,leading:w.includes(a)?t.createElement(l.Icon,{source:g.Uninstall}):t.createElement(l.Icon,{source:g.Download}),trailing:l.Arrow,onPress:()=>{f(h,"_selected_plugin",a),e?n(o,{pageName:" ",pagePanel:()=>t.createElement(z,{addonType:"plugin"})}):o.navigate("PluginDetail")},onLongPress:()=>{w.includes(a)?se(a,()=>{let i=Object.assign([],w);i.splice(i.indexOf(a),1),S(i)}):V(a,s[a].url,()=>{let i=Object.assign([],w);i.push(a),S(i)})}}))))}function ke({isSetting:e=!1,renderPage:n=null}){const r=C.createThemedStyleSheet({container:{flex:1,backgroundColor:m.ThemeColorMap.BACKGROUND_PRIMARY}}),o=J.useNavigation(),s=X(),[u,E]=t.useState(""),[w,S]=t.useState(oe().map(a=>a.name));return t.createElement(t.Fragment,null,t.createElement(be,{placeholder:"Search themes",onChangeText:a=>E(a)}),t.createElement($,{style:r.container},Object.keys(s).sort().filter(a=>a.toLowerCase().includes(u.toLowerCase())).map(a=>t.createElement(l,{label:s[a].version?`${a} - v${s[a].version}`:a,subLabel:s[a].description,leading:w.includes(a)?t.createElement(l.Icon,{source:g.Uninstall}):t.createElement(l.Icon,{source:g.Download}),trailing:l.Arrow,onPress:()=>{f(h,"_selected_theme",a),e?n(o,{pageName:" ",pagePanel:()=>t.createElement(z,{addonType:"theme"})}):o.navigate("ThemeDetail")}}))))}function De({isSetting:e=!1,renderPage:n=null}){const r=C.createThemedStyleSheet({container:{flex:1,backgroundColor:m.ThemeColorMap.BACKGROUND_PRIMARY}}),o=J.useNavigation(),s=J.useIsFocused(),u=Y(),E=X(),w=ue(u),S=ge(E);let[a,i]=t.useState(w.length?w:["@"]),[p,x]=t.useState(S.length?S:["@"]);const[k,D]=t.useState(Boolean(A(h,"check_updates")));return t.useEffect(()=>{let c=de("plugin"),b=Object.assign([],a.filter(O=>!c.includes(O)));i(b.length?b:["@"]);let le=de("theme"),B=Object.assign([],p.filter(O=>!le.includes(O)));x(B.length?B:["@"])},[s]),t.createElement($,{style:r.container},t.createElement(P,{title:"UPDATE"},t.createElement(l,{label:"Check updates on startup",leading:t.createElement(l.Icon,{source:g.Update}),trailing:t.createElement(_e,{value:k,onValueChange:c=>{D(c),f(h,"check_updates",c)}})})),t.createElement(P,{title:"PLUGINS"},a.map(c=>c==="@"?t.createElement(l,{label:"No updates are found for plugins"}):t.createElement(l,{label:c&&`${c} - v${F(c).version} -> v${u[c].version}`,subLabel:u[c].description,leading:t.createElement(l.Icon,{source:g.Download}),trailing:l.Arrow,onPress:()=>{f(h,"_selected_plugin",c),e?n(o,{pageName:" ",pagePanel:()=>t.createElement(z,{addonType:"plugin"})}):o.navigate("PluginDetail")},onLongPress:()=>{V(c,u[c].url,()=>{re("plugin",c);let b=Object.assign([],a);b.splice(b.indexOf(c),1),i(b.length?b:["@"])})}}))),t.createElement(P,{title:"THEMES"},p.map(c=>c==="@"?t.createElement(l,{label:"No updates are found for themes"}):t.createElement(l,{label:c&&`${c} - v${K(c).version} -> v${E[c].version}`,subLabel:E[c].description,leading:t.createElement(l.Icon,{source:g.Download}),trailing:l.Arrow,onPress:()=>{f(h,"_selected_theme",c),e?n(o,{pageName:" ",pagePanel:()=>t.createElement(z,{addonType:"theme"})}):o.navigate("ThemeDetail")},onLongPress:()=>{ne(c,E[c].url,()=>{re("theme",c);let b=Object.assign([],p);b.splice(b.indexOf(c),1),x(b.length?b:["@"])})}}))))}function Be(){const e=C.createThemedStyleSheet({container:{flex:1,backgroundColor:m.ThemeColorMap.BACKGROUND_PRIMARY},importText:{color:"white",height:40,paddingLeft:15}}),n=Y(),r=X(),[o,s]=t.useState({"":{}}),[u,E]=t.useState({"":{}});function w(i){const p=Q().map(c=>c.name),x=oe().map(c=>c.name);let k={},D={};i[0].split(";").filter(c=>Object.keys(n).includes(c)).forEach(c=>{k[c]=Object.assign(n[c],{installed:p.includes(c)})}),s(Object.keys(k).length?k:{"":{}}),i[1].split(";").filter(c=>Object.keys(r).includes(c)).forEach(c=>{D[c]=Object.assign(r[c],{installed:x.includes(c)})}),E(Object.keys(D).length?D:{"":{}})}function S(i,p=void 0){let x=i.split("|");if(x.length!=2){let k=p||"Invalid text format. Please make sure that you entered correct text.";return N.open({content:k,source:g.Fail}),!1}else return x}let a;return t.createElement($,{style:e.container},t.createElement(P,{title:"IMPORT"},t.createElement(l,{style:e.importBackup,label:"Import from backup",subLabel:"Import installed addons from backup that linked to your discord account.",leading:t.createElement(l.Icon,{source:g.Import}),trailing:l.Arrow,onPress:()=>{Tt("1048982327809818706").then(i=>{let p=S(i,"No backup was found.");p&&(w(p),N.open({content:"Successfully imported addons from backup!",source:g.Check}))})}})),t.createElement(P,null,t.createElement(St,{style:e.importText,ref:i=>{a=i},placeholder:"Paste exported text",onSubmitEditing:i=>{let p=S(i.nativeEvent.text);p&&w(p)}}),t.createElement(l,{label:"Clear Input",trailing:l.Arrow,onPress:()=>{a.clear(),s({"":{}}),E({"":{}})}})),t.createElement(P,{title:"PLUGINS"},Object.keys(o).map(i=>o[i].url?t.createElement(l,{label:o[i].version?`${i} - v${o[i].version}`:i,subLabel:o[i].description,leading:o[i].installed?t.createElement(l.Icon,{source:g.Check}):t.createElement(l.Icon,{source:g.Download}),trailing:o[i].installed?void 0:l.Arrow,onPress:()=>{V(i,n[i].url,()=>{let p=Object.assign({},o);p[i].installed=!0,s(p)})}}):t.createElement(l,{label:"There are no imported plugins yet"}))),t.createElement(P,{title:"THEMES"},Object.keys(u).map(i=>u[i].url?t.createElement(l,{label:u[i].version?`${i} - v${u[i].version}`:i,subLabel:u[i].description,leading:u[i].installed?t.createElement(l.Icon,{source:g.Check}):t.createElement(l.Icon,{source:g.Download}),trailing:u[i].installed?void 0:l.Arrow,onPress:()=>{ne(i,r[i].url,()=>{let p=Object.assign({},u);p[i].installed=!0,E(p)})}}):t.createElement(l,{label:"There are no imported themes yet"}))))}const Z=ie.createStackNavigator();function Ct(){return t.createElement(Z.Navigator,{initialRouteName:"Home",headerMode:"screen",screenOptions:{...gt}},t.createElement(Z.Screen,{name:"Home",component:Le,options:{headerShown:!1}}),[[xe,"Plugins"],[ke,"Themes"],[Me,"Export"],[Be,"Import"],[De,"Update"]].map(([e,n])=>t.createElement(Z.Screen,{name:n,component:e})),t.createElement(Z.Screen,{name:"PluginDetail",component:()=>t.createElement(z,{addonType:"plugin"}),options:{title:""}}),t.createElement(Z.Screen,{name:"ThemeDetail",component:()=>t.createElement(z,{addonType:"theme"}),options:{title:""}}))}function Le({settings:e,renderPage:n}){const r=C.createThemedStyleSheet({container:{backgroundColor:m.ThemeColorMap.BACKGROUND_PRIMARY},header:{flexDirection:"row",justifyContent:"center",alignItems:"center"},image:{width:70,height:70,marginTop:20,marginLeft:20},title:{flexDirection:"column"},name:{fontSize:30,paddingTop:20,paddingLeft:20,paddingRight:30,color:m.ThemeColorMap.HEADER_PRIMARY},author:{fontSize:15,paddingLeft:50,color:m.ThemeColorMap.HEADER_SECONDARY},info:{height:45,paddingTop:3,paddingBottom:3,justifyContent:"center",alignItems:"center"},footer:{color:m.ThemeColorMap.HEADER_SECONDARY,textAlign:"center",paddingTop:10,paddingBottom:20}}),o=J.useNavigation();return t.useEffect(()=>{U.get(G(ot)).then(s=>{f(h,"compatibility",s.text)})},[]),t.createElement($,{style:r.container},t.createElement(he,{style:r.header},t.createElement(Ce,{source:{uri:"https://avatars.githubusercontent.com/u/43488869"},style:r.image}),t.createElement(he,{style:r.title},t.createElement(M,{style:r.name},"AddonManager"),t.createElement(M,{style:r.author},"by mafu"))),t.createElement(P,{title:"STORE"},t.createElement(l,{label:"Browse plugins",leading:t.createElement(Pe,{width:24,height:24}),trailing:l.Arrow,onPress:()=>{e?n(o,{pageName:"Plugins",pagePanel:()=>t.createElement(xe,{isSetting:!0,renderPage:n})}):o.navigate("Plugins")}}),t.createElement(l,{label:"Browse themes",leading:t.createElement(Ne,{width:24,height:24}),trailing:l.Arrow,onPress:()=>{e?n(o,{pageName:"Themes",pagePanel:()=>t.createElement(ke,{isSetting:!0,renderPage:n})}):o.navigate("Themes")}}),t.createElement(l,{label:"Export addons",leading:t.createElement(l.Icon,{source:g.Export}),trailing:l.Arrow,onPress:()=>{e?n(o,{pageName:"Export",pagePanel:Me}):o.navigate("Export")}}),t.createElement(l,{label:"Import addons",leading:t.createElement(l.Icon,{source:g.Import}),trailing:l.Arrow,onPress:()=>{e?n(o,{pageName:"Import",pagePanel:Be}):o.navigate("Import")}}),t.createElement(l,{label:"Update addons",leading:t.createElement(l.Icon,{source:g.Update}),trailing:l.Arrow,onPress:()=>{e?n(o,{pageName:"Update",pagePanel:()=>t.createElement(De,{isSetting:!0,renderPage:n})}):o.navigate("Update")}})),t.createElement(P,{title:"INFORMATION"},t.createElement(l,{label:"Follow me on Twitter",style:r.info,trailing:l.Arrow,leading:t.createElement(l.Icon,{source:g.Twitter}),onPress:()=>{te.openURL("https://twitter.com/m4fn3")}}),t.createElement(l,{label:"Visit my server for help",style:r.info,trailing:l.Arrow,leading:t.createElement(l.Icon,{source:g.Discord}),onPress:()=>{dt.acceptInviteAndTransitionToInviteChannel({inviteKey:"TrCqPTCrdq",context:{location:"Invite Button Embed"},callback:()=>{o.pop()}})}}),t.createElement(l,{label:"Check Source on GitHub",style:r.info,trailing:l.Arrow,leading:t.createElement(l.Icon,{source:g.GitHub}),onPress:()=>{te.openURL("https://github.com/m4fn3/AddonManager")}})),t.createElement(M,{style:r.footer},`v${we}`))}var $e;(function(e){e[e.BuiltIn=0]="BuiltIn",e[e.Guild=1]="Guild",e[e.DM=2]="DM"})($e||($e={}));var Ee;(function(e){e[e.Chat=1]="Chat",e[e.User=2]="User",e[e.Message=3]="Message"})(Ee||(Ee={}));var Oe;(function(e){e[e.BuiltIn=0]="BuiltIn",e[e.BuiltInText=1]="BuiltInText",e[e.BuiltInIntegration=2]="BuiltInIntegration",e[e.Bot=3]="Bot",e[e.Placeholder=4]="Placeholder"})(Oe||(Oe={}));var Fe;(function(e){e[e.Role=1]="Role",e[e.User=2]="User"})(Fe||(Fe={}));var Ue;(function(e){e[e.SubCommand=1]="SubCommand",e[e.SubCommandGroup=2]="SubCommandGroup",e[e.String=3]="String",e[e.Integer=4]="Integer",e[e.Boolean=5]="Boolean",e[e.User=6]="User",e[e.Channel=7]="Channel",e[e.Role=8]="Role",e[e.Mentionnable=9]="Mentionnable",e[e.Number=10]="Number",e[e.Attachment=11]="Attachment"})(Ue||(Ue={}));var je;(function(e){e[e.ApplicationCommand=2]="ApplicationCommand",e[e.MessageComponent=3]="MessageComponent"})(je||(je={}));const He=ie.createStackNavigator();var _t=({name:e="AddonManager",component:n=he,detail:r=null}={})=>{const o=C.createThemedStyleSheet({container:{backgroundColor:m.ThemeColorMap.BACKGROUND_MOBILE_SECONDARY,flex:1},cardStyle:{backgroundColor:m.ThemeColorMap.BACKGROUND_MOBILE_PRIMARY,color:m.ThemeColorMap.TEXT_NORMAL},header:{backgroundColor:m.ThemeColorMap.BACKGROUND_MOBILE_SECONDARY,shadowColor:"transparent",elevation:0},headerText:{color:m.ThemeColorMap.HEADER_PRIMARY},headerButton:{color:m.ThemeColorMap.HEADER_PRIMARY}});let s,u;return r&&(u=A(u,"_selected_plugin").toString(),s=F(u)),t.createElement(ze.NavigationContainer,{independent:!0},t.createElement(He.Navigator,{initialRouteName:e,style:o.container,screenOptions:{cardOverlayEnabled:!1,cardShadowEnabled:!1,cardStyle:o.cardStyle,headerStyle:o.header,headerTitleContainerStyle:o.headerTitleContainer,headerTitleAlign:"center",safeAreaInsets:{top:0}}},t.createElement(He.Screen,{name:e,component:n,options:{headerTitleStyle:{color:"white"},headerLeft:()=>t.createElement(Re,{color:o.headerButton.color,title:"Close",onPress:()=>ee.pop()}),headerRight:()=>r?t.createElement(Re,{color:o.headerButton.color,title:s?"Uninstall":"Install",onPress:()=>{if(s)se(u,()=>ee.pop());else{const E=Y();V(u,E[u].url,()=>ee.pop())}}}):t.createElement(t.Fragment,null),...ie.TransitionPresets.ModalPresentationIOS}})))};const It={id:"addon",name:"addon",displayName:"addon",description:"Open AddonManager",displayDescription:"Open AddonManager",type:Ee.Chat,execute:async function(e,n){ee.push(_t,{component:Ct,name:"AddonManager"})}},Mt=Xe("AddonManager"),Ge={...Ze,onStart(){this.commands=[It],["plugin","theme"].forEach(e=>wt(e)),lt(),it(),yt()},onStop(){Mt.unpatchAll()},renderPage(e,{pageName:n,pagePanel:r}){var o;return(o=e==null?void 0:e.push)==null?void 0:o.call(e,"EnmityCustomPage",{pageName:n,pagePanel:r})},getSettingsPanel({settings:e}){return t.createElement(Le,{settings:e,renderPage:Ge.renderPage})}};Ve(Ge);
