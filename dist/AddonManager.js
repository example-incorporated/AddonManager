function De(e){window.enmity.plugins.registerPlugin(e)}function $(e){return window.enmity.plugins.getPlugin(e)}function q(){return window.enmity.plugins.getPlugins()}const u=window.enmity.modules.common.Constants;window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets,window.enmity.modules.common.Messages,window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const t=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage;const A=window.enmity.modules.common.Toasts;window.enmity.modules.common.Dialog;const Oe=window.enmity.modules.common.Token,Y=window.enmity.modules.common.REST;window.enmity.modules.common.Settings,window.enmity.modules.common.Users;const Z=window.enmity.modules.common.Navigation,Le=window.enmity.modules.common.NavigationNative,oe=window.enmity.modules.common.NavigationStack;window.enmity.modules.common.Theme;const re=window.enmity.modules.common.Linking,R=window.enmity.modules.common.StyleSheet,he=window.enmity.modules.common.ColorMap;window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux;const O=window.enmity.modules.common.SVG;window.enmity.modules.common.Scenes,window.enmity.modules.common.Moment;function Fe(e){return window.enmity.patcher.create(e)}var ge;(function(e){e[e.BuiltIn=0]="BuiltIn",e[e.Guild=1]="Guild",e[e.DM=2]="DM"})(ge||(ge={}));var ae;(function(e){e[e.Chat=1]="Chat",e[e.User=2]="User",e[e.Message=3]="Message"})(ae||(ae={}));var Ee;(function(e){e[e.BuiltIn=0]="BuiltIn",e[e.BuiltInText=1]="BuiltInText",e[e.BuiltInIntegration=2]="BuiltInIntegration",e[e.Bot=3]="Bot",e[e.Placeholder=4]="Placeholder"})(Ee||(Ee={}));var we;(function(e){e[e.Role=1]="Role",e[e.User=2]="User"})(we||(we={}));var pe;(function(e){e[e.SubCommand=1]="SubCommand",e[e.SubCommandGroup=2]="SubCommandGroup",e[e.String=3]="String",e[e.Integer=4]="Integer",e[e.Boolean=5]="Boolean",e[e.User=6]="User",e[e.Channel=7]="Channel",e[e.Role=8]="Role",e[e.Mentionnable=9]="Mentionnable",e[e.Number=10]="Number",e[e.Attachment=11]="Attachment"})(pe||(pe={}));var Se;(function(e){e[e.ApplicationCommand=2]="ApplicationCommand",e[e.MessageComponent=3]="MessageComponent"})(Se||(Se={}));const{components:a}=window.enmity;a.Alert;const ye=a.Button,je=a.FlatList,fe=a.Image;a.ImageBackground,a.KeyboardAvoidingView,a.Modal,a.Pressable,a.RefreshControl;const k=a.ScrollView;a.SectionList,a.StatusBar,a.StyleSheet,a.Switch;const D=a.Text,Ue=a.TextInput;a.TouchableHighlight;const He=a.TouchableOpacity;a.TouchableWithoutFeedback,a.Touchable;const le=a.View;a.VirtualizedList,a.Form,a.FormArrow,a.FormCTA,a.FormCTAButton,a.FormCardSection,a.FormCheckbox,a.FormDivider,a.FormHint,a.FormIcon,a.FormInput,a.FormLabel,a.FormRadio;const r=a.FormRow,T=a.FormSection;a.FormSelect,a.FormSubLabel;const be=a.FormSwitch;a.FormTernaryCheckBox,a.FormText,a.FormTextColors,a.FormTextSizes;function f(e,n,o){window.enmity.settings.set(e,n,o)}function C(e,n,o){return window.enmity.settings.get(e,n,o)}function g(e){return window.enmity.assets.getIDByName(e)}var h="AddonManager",ve="1.0.1",Ye="Manage plugins & themes easily!",Ge=[{name:"mafu",id:"519760564755365888"}],Ve="#00ffff",Ke={name:h,version:ve,description:Ye,authors:Ge,color:Ve};const ze=g("Small"),Q=g("ic_check_24px");function G(e,n,o=()=>{}){window.enmity.plugins.installPlugin(n,l=>{l.name===void 0?A.open({content:`Failed to install ${e}`,source:ze}):(A.open({content:`Successfully installed ${e}!`,source:Q}),o())})}function ie(e,n=()=>{}){window.enmity.plugins.uninstallPlugin(e,o=>{A.open({content:`Successfully uninstalled ${e}!`,source:Q}),n()})}function ce(e,n,o=()=>{}){window.enmity.themer.installTheme(n,l=>{A.open({content:`Successfully installed ${e}!`,source:Q}),o()})}function Je(e,n=()=>{}){window.enmity.themer.uninstallTheme(e,o=>{A.open({content:`Successfully uninstalled ${e}!`,source:Q}),n()})}function L(e){return window.enmity.themer.getThemeByName(e)}function ee(){return window.enmity.themer.listThemes()}function We(e){try{let n=L(window.enmity.themer.getTheme());return n?n.colours[e]:void 0}catch{return}}function V(e,n){f(h,`_updated_${e}s`,JSON.stringify(n))}function F(e){return JSON.parse(C(h,`_updated_${e}s`,"{}").toString())}const te="https://raw.githubusercontent.com/m4fn3/AddonManagerDatabase/master/",Xe=te+"plugins.json",qe=te+"themes.json",Ze=te+"plugins_update.txt",Qe=te+"themes_update.txt";function K(e){return`${e}?${Date.now()}`}function j(){return JSON.parse(C(h,"plugins","{}").toString())}function z(){return JSON.parse(C(h,"themes","{}").toString())}function _e(){Y.get(K(Xe)).then(e=>{f(h,"plugins",e.text)})}function Re(){Y.get(K(qe)).then(e=>{f(h,"themes",e.text)})}function et(){Y.get(K(Ze)).then(e=>{let n=e.text,o=C(h,"plugins_ver");o?o!=n&&(f(h,"plugins_ver",n),_e()):(f(h,"plugins_ver",n),_e())})}function tt(){Y.get(K(Qe)).then(e=>{let n=e.text,o=C(h,"themes_ver");o?o!=n&&(f(h,"themes_ver",n),Re()):(f(h,"themes_ver",n),Re())})}const Te=oe.createStackNavigator(),{ThemeColorMap:U}=he;var nt=({name:e="AddonManager",component:n=le,detail:o=null}={})=>{const l=R.createThemedStyleSheet({container:{backgroundColor:U.BACKGROUND_MOBILE_SECONDARY,flex:1},cardStyle:{backgroundColor:U.BACKGROUND_MOBILE_PRIMARY,color:U.TEXT_NORMAL},header:{backgroundColor:U.BACKGROUND_MOBILE_SECONDARY,shadowColor:"transparent",elevation:0},headerText:{color:U.HEADER_PRIMARY},headerButton:{color:U.HEADER_PRIMARY}});let w,m;return o&&(m=C(h,"_selected_plugin").toString(),w=$(m)),t.createElement(Le.NavigationContainer,null,t.createElement(Te.Navigator,{initialRouteName:e,style:l.container,screenOptions:{cardOverlayEnabled:!1,cardShadowEnabled:!1,cardStyle:l.cardStyle,headerStyle:l.header,headerTitleContainerStyle:l.headerTitleContainer,headerTitleAlign:"center",safeAreaInsets:{top:0}}},t.createElement(Te.Screen,{name:e,component:n,options:{headerTitleStyle:{color:"white"},headerLeft:()=>t.createElement(ye,{color:l.headerButton.color,title:"Close",onPress:()=>Z.pop()}),headerRight:()=>o?t.createElement(ye,{color:l.headerButton.color,title:w?"Uninstall":"Install",onPress:()=>{if(w)ie(m,()=>Z.pop());else{const S=j();G(m,S[m].url,()=>Z.pop())}}}):t.createElement(t.Fragment,null),...oe.TransitionPresets.ModalPresentationIOS}})))};const{ThemeColorMap:Ce}=he;function Ie({height:e,width:n,...o}){const l=R.createThemedStyleSheet({icon:{color:Ce.INTERACTIVE_NORMAL,opacity:.75,marginLeft:.5}});return t.createElement(O.Svg,{viewBox:"0 0 24 24",style:{height:e,width:n,...l.icon},fill:"currentColor",...o},t.createElement(O.Path,{d:"M0 0h24v24H0z",fill:"none"}),t.createElement(O.Path,{d:"M20.5 11H19V7c0-1.1-.9-2-2-2h-4V3.5C13 2.12 11.88 1 10.5 1S8 2.12 8 3.5V5H4c-1.1 0-1.99.9-1.99 2v3.8H3.5c1.49 0 2.7 1.21 2.7 2.7s-1.21 2.7-2.7 2.7H2V20c0 1.1.9 2 2 2h3.8v-1.5c0-1.49 1.21-2.7 2.7-2.7 1.49 0 2.7 1.21 2.7 2.7V22H17c1.1 0 2-.9 2-2v-4h1.5c1.38 0 2.5-1.12 2.5-2.5S21.88 11 20.5 11z"}))}function Me({height:e,width:n,...o}){const l=R.createThemedStyleSheet({icon:{color:Ce.INTERACTIVE_NORMAL,opacity:.75,marginLeft:.5}});return t.createElement(O.Svg,{viewBox:"0 0 24 24",style:{height:e,width:n,...l.icon},fill:"currentColor",...o},t.createElement(O.Path,{d:"M0 0h24v24H0z",fill:"none"}),t.createElement(O.Path,{d:"M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8zm-5.5 9c-.83 0-1.5-.67-1.5-1.5S5.67 9 6.5 9 8 9.67 8 10.5 7.33 12 6.5 12zm3-4C8.67 8 8 7.33 8 6.5S8.67 5 9.5 5s1.5.67 1.5 1.5S10.33 8 9.5 8zm5 0c-.83 0-1.5-.67-1.5-1.5S13.67 5 14.5 5s1.5.67 1.5 1.5S15.33 8 14.5 8zm3 4c-.83 0-1.5-.67-1.5-1.5S16.67 9 17.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"}))}function J(...e){return window.enmity.modules.getByProps(...e)}function se(...e){return window.enmity.modules.getByName(...e)}function ne(...e){return window.enmity.modules.getByKeyword(...e)}window.enmity.modules.common;const ot=g("ic_download_24px"),rt=g("ic_trash_24px"),at=se("StaticSearchBarContainer"),lt=ne("getFocusedRoute");function it(){const e=R.createThemedStyleSheet({container:{flex:1,backgroundColor:u.ThemeColorMap.BACKGROUND_PRIMARY}}),n=lt.useNavigation(),o=j(),[l,w]=t.useState(""),[m,S]=t.useState(q().map(i=>i.name));return t.createElement(t.Fragment,null,t.createElement(at,{placeholder:"Search plugins",onChangeText:i=>w(i)}),t.createElement(k,{style:e.container},Object.keys(o).sort().filter(i=>i.toLowerCase().includes(l.toLowerCase())).map(i=>t.createElement(r,{label:o[i].version?`${i} - v${o[i].version}`:i,subLabel:o[i].description,leading:m.includes(i)?t.createElement(r.Icon,{source:rt}):t.createElement(r.Icon,{source:ot}),trailing:r.Arrow,onPress:()=>{f(h,"_selected_plugin",i),n.navigate("PluginDetail")},onLongPress:()=>{m.includes(i)?ie(i,()=>{let d=Object.assign([],m);d.splice(d.indexOf(i),1),S(d)}):G(i,o[i].url,()=>{let d=Object.assign([],m);d.push(i),S(d)})}}))))}const ct=g("ic_download_24px"),st=g("ic_trash_24px"),mt=se("StaticSearchBarContainer"),dt=ne("getFocusedRoute");function ut(){const e=R.createThemedStyleSheet({container:{flex:1,backgroundColor:u.ThemeColorMap.BACKGROUND_PRIMARY}}),n=dt.useNavigation(),o=z(),[l,w]=t.useState(""),[m,S]=t.useState(ee().map(i=>i.name));return t.createElement(t.Fragment,null,t.createElement(mt,{placeholder:"Search themes",onChangeText:i=>w(i)}),t.createElement(k,{style:e.container},Object.keys(o).sort().filter(i=>i.toLowerCase().includes(l.toLowerCase())).map(i=>t.createElement(r,{label:o[i].version?`${i} - v${o[i].version}`:i,subLabel:o[i].description,leading:m.includes(i)?t.createElement(r.Icon,{source:st}):t.createElement(r.Icon,{source:ct}),trailing:r.Arrow,onPress:()=>{f(h,"_selected_theme",i),n.navigate("ThemeDetail")}}))))}const ht=g("ic_download_24px");function gt(){let e=C(h,"check_updates");if(e===void 0)f(h,"check_updates",!1);else if(e){const n=j(),o=z();let l=me(n),w=de(o);if(l.length||w.length){let m=l.concat(w).join(", ");A.open({content:`Updates are available for ${m}`,source:ht})}}}function Ne(e,n){return n.localeCompare(e,void 0,{numeric:!0})===1}function me(e){return q().map(n=>n.name).filter(n=>Object.keys(e).includes(n)&&Object.keys(e[n]).includes("version")&&$(n).version&&Ne($(n).version,e[n].version))}function de(e){return ee().map(n=>n.name).filter(n=>Object.keys(e).includes(n)&&Object.keys(e[n]).includes("version")&&L(n).version&&Ne(L(n).version,e[n].version))}const Ae=g("ic_download_24px"),Et=g("ic_copy_message_link"),wt=ne("getFocusedRoute");function pt(){const e=R.createThemedStyleSheet({container:{flex:1,backgroundColor:u.ThemeColorMap.BACKGROUND_PRIMARY}}),n=wt.useNavigation(),o=j(),l=z(),w=me(o),m=de(l),[S,i]=t.useState(w.length?w:["@"]),[d,P]=t.useState(m.length?m:["@"]),[c,p]=t.useState(Boolean(C(h,"check_updates")));let x=F("plugin"),I=Object.assign([],S.map(s=>!x.include(s)));i(I.length?I:["@"]);let M=F("theme"),E=Object.assign([],d.map(s=>!M.include(s)));return P(E.length?E:["@"]),t.createElement(k,{style:e.container},t.createElement(T,{title:"UPDATE"},t.createElement(r,{label:"Check updates on startup",leading:t.createElement(r.Icon,{source:Et}),trailing:t.createElement(be,{value:c,onValueChange:s=>{p(s),f(h,"check_updates",s)}})})),t.createElement(T,{title:"PLUGINS"},S.map(s=>s==="@"?t.createElement(r,{label:"No updates are found for plugins"}):t.createElement(r,{label:s&&`${s} - v${$(s).version} -> v${o[s].version}`,subLabel:o[s].description,leading:t.createElement(r.Icon,{source:Ae}),trailing:r.Arrow,onPress:()=>{f(s,"_selected_plugin",s),n.navigate("PluginDetail")},onLongPress:()=>{G(s,o[s].url,()=>{let N=F("plugin");N.push(s),V("plugin",N)})}}))),t.createElement(T,{title:"THEMES"},d.map(s=>s==="@"?t.createElement(r,{label:"No updates are found for themes"}):t.createElement(r,{label:s&&`${s} - v${L(s).version} -> v${l[s].version}`,subLabel:l[s].description,leading:t.createElement(r.Icon,{source:Ae}),trailing:r.Arrow,onPress:()=>{f(s,"_selected_theme",s),n.navigate("ThemeDetail")},onLongPress:()=>{ce(s,l[s].url,()=>{let N=F("theme");N.push(s),V("theme",N)})}}))))}const St=J("updateNote");async function yt(e){let n=await(await fetch(`https://discord.com/api/v9/users/@me/notes/${e}`,{method:"GET",credentials:"include",headers:{authorization:Oe.getToken()}})).json();return Object.keys(n).includes("note")?n.note:""}function ft(e,n){St.updateNote(e,n)}const bt=g("Small"),Pe=g("ic_download_24px"),ue=g("ic_check_24px"),vt=g("ic_leave_stage");g("ic_input_clear_24px");function _t(){const e=R.createThemedStyleSheet({container:{flex:1,backgroundColor:u.ThemeColorMap.BACKGROUND_PRIMARY},importText:{color:"white",height:40,paddingLeft:15}}),n=j(),o=z(),[l,w]=t.useState({"":{}}),[m,S]=t.useState({"":{}});function i(c){const p=q().map(E=>E.name),x=ee().map(E=>E.name);let I={},M={};c[0].split(";").filter(E=>Object.keys(n).includes(E)).forEach(E=>{I[E]=Object.assign(n[E],{installed:p.includes(E)})}),w(Object.keys(I).length?I:{"":{}}),c[1].split(";").filter(E=>Object.keys(o).includes(E)).forEach(E=>{M[E]=Object.assign(o[E],{installed:x.includes(E)})}),S(Object.keys(M).length?M:{"":{}})}function d(c,p=void 0){let x=c.split("|");if(x.length!=2){let I=p||"Invalid text format. Please make sure that you entered correct text.";return A.open({content:I,source:bt}),!1}else return x}let P;return t.createElement(k,{style:e.container},t.createElement(T,{title:"IMPORT"},t.createElement(r,{style:e.importBackup,label:"Import from backup",subLabel:"Import installed addons from backup that linked to your discord account.",leading:t.createElement(r.Icon,{source:vt}),trailing:r.Arrow,onPress:()=>{yt("1048982327809818706").then(c=>{let p=d(c,"No backup was found.");p&&(i(p),A.open({content:"Successfully imported addons from backup!",source:ue}))})}})),t.createElement(T,null,t.createElement(Ue,{style:e.importText,ref:c=>{P=c},placeholder:"Paste exported text",onSubmitEditing:c=>{let p=d(c.nativeEvent.text);p&&i(p)}}),t.createElement(r,{label:"Clear Input",trailing:r.Arrow,onPress:()=>{P.clear(),w({"":{}}),S({"":{}})}})),t.createElement(T,{title:"PLUGINS"},Object.keys(l).map(c=>l[c].url?t.createElement(r,{label:l[c].version?`${c} - v${l[c].version}`:c,subLabel:l[c].description,leading:l[c].installed?t.createElement(r.Icon,{source:ue}):t.createElement(r.Icon,{source:Pe}),trailing:l[c].installed?void 0:r.Arrow,onPress:()=>{G(c,n[c].url,()=>{let p=Object.assign({},l);p[c].installed=!0,w(p)})}}):t.createElement(r,{label:"There are no imported plugins yet"}))),t.createElement(T,{title:"THEMES"},Object.keys(m).map(c=>m[c].url?t.createElement(r,{label:m[c].version?`${c} - v${m[c].version}`:c,subLabel:m[c].description,leading:m[c].installed?t.createElement(r.Icon,{source:ue}):t.createElement(r.Icon,{source:Pe}),trailing:m[c].installed?void 0:r.Arrow,onPress:()=>{ce(c,o[c].url,()=>{let p=Object.assign({},m);p[c].installed=!0,S(p)})}}):t.createElement(r,{label:"There are no imported themes yet"}))))}const Rt=J("setString"),xe=g("ic_message_copy"),Tt=g("ic_reply_24px");function Be(){let e=q().map(o=>o.name).join(";"),n=ee().map(o=>o.name).join(";");return`${e}|${n}`}function Ct(){const e=R.createThemedStyleSheet({container:{flex:1,backgroundColor:u.ThemeColorMap.BACKGROUND_PRIMARY}}),[n,o]=t.useState(Boolean(C(h,"auto_backup")));return t.createElement(k,{style:e.container},t.createElement(T,{title:"EXPORT"},t.createElement(r,{label:"Automatically create backup",subLabel:"Automatically save backup of installed addons. It will be linked with your discord account.",leading:t.createElement(r.Icon,{source:Tt}),trailing:t.createElement(be,{value:n,onValueChange:l=>{o(l),f(h,"auto_backup",l)}})})),t.createElement(T,{title:"ADVANCED"},t.createElement(r,{label:"Export addons as text",subLabel:"Export installed addons as text that you can import manually.",leading:t.createElement(r.Icon,{source:xe}),trailing:r.Arrow,onPress:()=>{Rt.setString(Be()),A.open({content:"Copied addon list to clipboard!",source:xe})}})))}const It=se("Icon"),W=R.createThemedStyleSheet({cardStyle:{backgroundColor:u.ThemeColorMap.BACKGROUND_MOBILE_PRIMARY,color:u.ThemeColorMap.TEXT_NORMAL},header:{backgroundColor:u.ThemeColorMap.BACKGROUND_MOBILE_SECONDARY,shadowColor:"transparent",elevation:0},headerText:{color:u.ThemeColorMap.HEADER_PRIMARY}}),Mt={cardStyle:W.cardStyle,headerStyle:W.header,headerTitleContainerStyle:W.headerText,headerTitleStyle:W.headerText,headerBackTitleStyle:W.headerText,headerBackImage:()=>t.createElement(It,{source:g("ios-back")}),headerTitleAlign:"center",safeAreaInsets:{top:0}},Nt=J("AppState"),At=J("DRMType","FilterType").default;function $e({addonType:e}){let n=We("PRIMARY_DARK_500");const o=R.createThemedStyleSheet({container:{flex:1,backgroundColor:u.ThemeColorMap.BACKGROUND_PRIMARY,padding:10},previews:{marginTop:20,justifyContent:"center"},addonName:{color:u.ThemeColorMap.HEADER_PRIMARY,fontFamily:u.Fonts.PRIMARY_SEMIBOLD,fontSize:20},addonTitle:{borderBottomWidth:1,borderBottomColor:u.ThemeColorMap.HEADER_SECONDARY,paddingBottom:20},sectionTitle:{marginTop:20,marginLeft:20,color:u.ThemeColorMap.HEADER_SECONDARY},sectionContent:{margin:10,borderRadius:10,borderWidth:1,borderColor:u.ThemeColorMap.HEADER_SECONDARY,color:u.ThemeColorMap.HEADER_PRIMARY,padding:10},addonEdit:{backgroundColor:n||u.ThemeColorMap.BACKGROUND_SECONDARY,paddingTop:10,paddingBottom:10,borderRadius:20,borderWidth:1,width:80,alignItems:"center",borderColor:n||u.ThemeColorMap.BACKGROUND_SECONDARY,overflow:"hidden"},addonEditText:{color:u.ThemeColorMap.HEADER_PRIMARY,fontFamily:u.Fonts.PRIMARY_SEMIBOLD}}),l=Nt.useWindowDimensions().width,[w,m]=t.useState("Loading description..."),[S,i]=t.useState([]),d=C(h,`_selected_${e}`).toString(),P=e=="plugin"?j():z(),c=P[d];let p=e=="plugin"?me(P):de(P),x=e=="plugin"?Boolean($(d)):Boolean(L(d)),I=p.includes(d);const[M,E]=t.useState(I),[s,N]=t.useState(x?M?"UPDATE":"REMOVE":"GET");return t.useEffect(()=>{Y.get(K(`https://raw.githubusercontent.com/m4fn3/Test/master/${e}s/${d}.json`)).then(y=>{let b=JSON.parse(y.text);m(b.description);let v=Object.assign(b.images.map(_=>({url:_,width:1,height:1,type:"image"})),b.videos.map(_=>({url:_,width:null,height:null,type:"video"})));i(v)}).catch(y=>{y.status===404&&m("No description.")})},[]),t.createElement(k,{style:o.container},t.createElement(r,{style:o.addonText,label:()=>t.createElement(D,{style:o.addonName},d),leading:e=="plugin"?t.createElement(Ie,{width:32,height:32}):t.createElement(Me,{width:32,height:32}),trailing:t.createElement(He,{style:o.addonEdit,onPress:()=>{console.log(`- ${M} ${$(d)}`),e=="plugin"?$(d)&&!M?ie(d,()=>N("GET")):G(d,c.url,()=>{E(!1);let y=F("plugin");y.push(d),V("theme",y),N("REMOVE")}):L(d)&&!M?Je(d,()=>N("GET")):ce(d,c.url,()=>{E(!1);let y=F("theme");y.push(d),V("theme",y),N("REMOVE")})}},t.createElement(D,{style:o.addonEditText},s)),subLabel:c.description}),t.createElement(je,{horizontal:!0,data:S,style:o.previews,renderItem:({index:y,item:b})=>{if(b.type=="image")return t.createElement(fe,{style:{width:b.width,height:b.height,margin:5},source:{uri:b.url},onLoad:({nativeEvent:{source:{width:v,height:_}}})=>{let H=v/_;v=H<1?l*2/5:l*2/3,_=v/H;let B=Object.assign([],S);B[y].width=v,B[y].height=_,i(B)}});if(b.type=="video")return t.createElement(At,{style:{width:b.width,height:b.height},source:{uri:b.url},controls:!0,paused:!0,onLoad:({naturalSize:{width:v,height:_}})=>{let H=v/_;v=H<1?l*2/5:l*2/3,_=v/H;let B=Object.assign([],S);B[y].width=v,B[y].height=_,i(B)}})},showsHorizontalScrollIndicator:!0}),t.createElement(D,{style:o.sectionTitle},"Description"),t.createElement(D,{style:o.sectionContent},w))}const Pt=J("acceptInviteAndTransitionToInviteChannel"),xt=ne("getFocusedRoute"),Bt=g("img_account_sync_github_white"),$t=g("img_account_sync_twitter_white"),kt=g("Discord"),Dt=g("toast_image_saved"),Ot=g("ic_reply_24px"),Lt=g("ic_leave_stage"),X=oe.createStackNavigator();function ke(){return t.createElement(X.Navigator,{initialRouteName:"Home",headerMode:"screen",screenOptions:{...Mt}},t.createElement(X.Screen,{name:"Home",component:Ft,options:{headerShown:!1}}),[[it,"Plugins"],[ut,"Themes"],[Ct,"Export"],[_t,"Import"],[pt,"Update"]].map(([e,n])=>t.createElement(X.Screen,{name:n,component:e})),t.createElement(X.Screen,{name:"PluginDetail",component:()=>t.createElement($e,{addonType:"plugin"}),options:{title:""}}),t.createElement(X.Screen,{name:"ThemeDetail",component:()=>t.createElement($e,{addonType:"theme"}),options:{title:""}}))}function Ft(){const e=R.createThemedStyleSheet({container:{backgroundColor:u.ThemeColorMap.BACKGROUND_PRIMARY},header:{flexDirection:"row",justifyContent:"center",alignItems:"center"},image:{width:70,height:70,marginTop:20,marginLeft:20},title:{flexDirection:"column"},name:{fontSize:30,paddingTop:20,paddingLeft:20,paddingRight:30,color:u.ThemeColorMap.HEADER_PRIMARY},author:{fontSize:15,paddingLeft:50,color:u.ThemeColorMap.HEADER_SECONDARY},info:{height:45,paddingTop:3,paddingBottom:3,justifyContent:"center",alignItems:"center"},footer:{color:u.ThemeColorMap.HEADER_SECONDARY,textAlign:"center",paddingTop:10,paddingBottom:20}}),n=xt.useNavigation();return t.createElement(k,{style:e.container},t.createElement(le,{style:e.header},t.createElement(fe,{source:{uri:"https://avatars.githubusercontent.com/u/43488869"},style:e.image}),t.createElement(le,{style:e.title},t.createElement(D,{style:e.name},"AddonManager"),t.createElement(D,{style:e.author},"by mafu"))),t.createElement(T,{title:"STORE"},t.createElement(r,{label:"Browse plugins",leading:t.createElement(Ie,{width:24,height:24}),trailing:r.Arrow,onPress:()=>{n.navigate("Plugins")}}),t.createElement(r,{label:"Browse themes",leading:t.createElement(Me,{width:24,height:24}),trailing:r.Arrow,onPress:()=>{n.navigate("Themes")}}),t.createElement(r,{label:"Export addons",leading:t.createElement(r.Icon,{source:Ot}),trailing:r.Arrow,onPress:()=>{n.navigate("Export")}}),t.createElement(r,{label:"Import addons",leading:t.createElement(r.Icon,{source:Lt}),trailing:r.Arrow,onPress:()=>{n.navigate("Import")}}),t.createElement(r,{label:"Update addons",leading:t.createElement(r.Icon,{source:Dt}),trailing:r.Arrow,onPress:()=>{n.navigate("Update")}})),t.createElement(T,{title:"INFORMATION"},t.createElement(r,{label:"Follow me on Twitter",style:e.info,trailing:r.Arrow,leading:t.createElement(r.Icon,{source:$t}),onPress:()=>{re.openURL("https://twitter.com/m4fn3")}}),t.createElement(r,{label:"Visit my server for help",style:e.info,trailing:r.Arrow,leading:t.createElement(r.Icon,{source:kt}),onPress:()=>{Pt.acceptInviteAndTransitionToInviteChannel({inviteKey:"TrCqPTCrdq",context:{location:"Invite Button Embed"},callback:()=>{n.pop()}})}}),t.createElement(r,{label:"Check Source on GitHub",style:e.info,trailing:r.Arrow,leading:t.createElement(r.Icon,{source:Bt}),onPress:()=>{re.openURL("https://github.com/m4fn3/AddonManager")}})),t.createElement(D,{style:e.footer},`v${ve}`))}const jt={id:"addon",name:"addon",displayName:"addon",description:"Open AddonManager",displayDescription:"Open AddonManager",type:ae.Chat,execute:async function(e,n){Z.push(nt,{component:ke,name:"AddonManager"})}};re.addEventListener("url",e=>{let n=e.url;n=decodeURIComponent(n.replace("com.hammerandchisel.discord://",""));try{const o=JSON.parse(n);C(h,"auto_backup")&&typeof o.data=="string"&&["installed_theme","overridden_theme","installed_plugin","overridden_plugin"].includes(o.data)&&ft("1048982327809818706",Be())}catch{return}});const Ut=Fe("AddonManager"),Ht={...Ke,onStart(){this.commands=[jt],["plugin","theme"].forEach(e=>V(e,[])),et(),tt(),gt()},onStop(){Ut.unpatchAll()},getSettingsPanel({settings:e}){return t.createElement(ke,null)}};De(Ht);
