function Ue(e){window.enmity.plugins.registerPlugin(e)}function L(e){return window.enmity.plugins.getPlugin(e)}function Z(){return window.enmity.plugins.getPlugins()}const h=window.enmity.modules.common.Constants;window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets,window.enmity.modules.common.Messages,window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const t=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage;const x=window.enmity.modules.common.Toasts;window.enmity.modules.common.Dialog;const je=window.enmity.modules.common.Token,O=window.enmity.modules.common.REST;window.enmity.modules.common.Settings,window.enmity.modules.common.Users;const Q=window.enmity.modules.common.Navigation,Ge=window.enmity.modules.common.NavigationNative,ae=window.enmity.modules.common.NavigationStack;window.enmity.modules.common.Theme;const ee=window.enmity.modules.common.Linking,M=window.enmity.modules.common.StyleSheet,we=window.enmity.modules.common.ColorMap;window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux;const F=window.enmity.modules.common.SVG;window.enmity.modules.common.Scenes,window.enmity.modules.common.Moment;function He(e){return window.enmity.patcher.create(e)}var pe;(function(e){e[e.BuiltIn=0]="BuiltIn",e[e.Guild=1]="Guild",e[e.DM=2]="DM"})(pe||(pe={}));var le;(function(e){e[e.Chat=1]="Chat",e[e.User=2]="User",e[e.Message=3]="Message"})(le||(le={}));var fe;(function(e){e[e.BuiltIn=0]="BuiltIn",e[e.BuiltInText=1]="BuiltInText",e[e.BuiltInIntegration=2]="BuiltInIntegration",e[e.Bot=3]="Bot",e[e.Placeholder=4]="Placeholder"})(fe||(fe={}));var ye;(function(e){e[e.Role=1]="Role",e[e.User=2]="User"})(ye||(ye={}));var be;(function(e){e[e.SubCommand=1]="SubCommand",e[e.SubCommandGroup=2]="SubCommandGroup",e[e.String=3]="String",e[e.Integer=4]="Integer",e[e.Boolean=5]="Boolean",e[e.User=6]="User",e[e.Channel=7]="Channel",e[e.Role=8]="Role",e[e.Mentionnable=9]="Mentionnable",e[e.Number=10]="Number",e[e.Attachment=11]="Attachment"})(be||(be={}));var Se;(function(e){e[e.ApplicationCommand=2]="ApplicationCommand",e[e.MessageComponent=3]="MessageComponent"})(Se||(Se={}));const{components:c}=window.enmity;c.Alert;const ve=c.Button,Ye=c.FlatList,Te=c.Image;c.ImageBackground,c.KeyboardAvoidingView,c.Modal,c.Pressable,c.RefreshControl;const $=c.ScrollView;c.SectionList,c.StatusBar,c.StyleSheet,c.Switch;const P=c.Text,Ve=c.TextInput;c.TouchableHighlight;const Ke=c.TouchableOpacity;c.TouchableWithoutFeedback,c.Touchable;const ie=c.View;c.VirtualizedList,c.Form,c.FormArrow,c.FormCTA,c.FormCTAButton,c.FormCardSection,c.FormCheckbox,c.FormDivider,c.FormHint,c.FormIcon,c.FormInput,c.FormLabel,c.FormRadio;const r=c.FormRow,N=c.FormSection;c.FormSelect,c.FormSubLabel;const Re=c.FormSwitch;c.FormTernaryCheckBox,c.FormText,c.FormTextColors,c.FormTextSizes;function v(e,n,o){window.enmity.settings.set(e,n,o)}function A(e,n,o){return window.enmity.settings.get(e,n,o)}var g="AddonManager",_e="1.1.0",ze="Manage plugins & themes easily!",Xe=[{name:"mafu",id:"519760564755365888"}],We="#00ffff",Je={name:g,version:_e,description:ze,authors:Xe,color:We};function R(e){return window.enmity.assets.getIDByName(e)}function K(...e){return window.enmity.modules.getByProps(...e)}function Ce(...e){return window.enmity.modules.getByName(...e)}function qe(...e){return window.enmity.modules.getByKeyword(...e)}window.enmity.modules.common;const Ze=Ce("Icon"),z=qe("getFocusedRoute"),Ie=Ce("StaticSearchBarContainer"),Qe=K("acceptInviteAndTransitionToInviteChannel"),et=K("AppState"),tt=K("DRMType","FilterType").default,Me=K("setString"),u={Copy:R("ic_message_copy"),GitHub:R("img_account_sync_github_white"),Twitter:R("img_account_sync_twitter_white"),Discord:R("Discord"),Update:R("toast_image_saved"),Export:R("ic_reply_24px"),Import:R("ic_leave_stage"),Fail:R("Small"),Download:R("ic_download_24px"),Check:R("ic_check_24px"),Clear:R("ic_input_clear_24px"),Uninstall:R("ic_trash_24px")},X=M.createThemedStyleSheet({cardStyle:{backgroundColor:h.ThemeColorMap.BACKGROUND_MOBILE_PRIMARY,color:h.ThemeColorMap.TEXT_NORMAL},header:{backgroundColor:h.ThemeColorMap.BACKGROUND_MOBILE_SECONDARY,shadowColor:"transparent",elevation:0},headerText:{color:h.ThemeColorMap.HEADER_PRIMARY}}),nt={cardStyle:X.cardStyle,headerStyle:X.header,headerTitleContainerStyle:X.headerText,headerTitleStyle:X.headerText,headerBackTitleStyle:X.headerText,headerBackImage:()=>t.createElement(Ze,{source:R("ios-back")}),headerTitleAlign:"center",safeAreaInsets:{top:0}};function ot(e,n,o,l=186){let E=e.replace("#","");const m=(_,i,w)=>parseInt(_.substring(i[0],i[1]),w),S=m(E,[0,2],16),a=m(E,[2,4],16),d=m(E,[4,6],16);return(S+a+d)/(255*3)>l?o:n}function U(e,n,o=()=>{}){window.enmity.plugins.installPlugin(n,l=>{l.name===void 0?x.open({content:`Failed to install ${e}`,source:u.Fail}):(x.open({content:`Successfully installed ${e}!`,source:u.Check}),o())})}function ce(e,n=()=>{}){window.enmity.plugins.uninstallPlugin(e,o=>{x.open({content:`Successfully uninstalled ${e}!`,source:u.Check}),n()})}function te(e,n,o=()=>{}){window.enmity.themer.installTheme(n,l=>{x.open({content:`Successfully installed ${e}!`,source:u.Check}),o()})}function rt(e,n=()=>{}){window.enmity.themer.uninstallTheme(e,o=>{x.open({content:`Successfully uninstalled ${e}!`,source:u.Check}),n()})}function j(e){return window.enmity.themer.getThemeByName(e)}function ne(){return window.enmity.themer.listThemes()}function at(e){try{let n=j(window.enmity.themer.getTheme());return n?n.colours[e]:void 0}catch{return}}function oe(e,n){let o=se("plugin");o.push(n),v(g,`_updated_${e}s`,JSON.stringify(o))}function lt(e){v(g,`_updated_${e}s`,"[]")}function se(e){return JSON.parse(A(g,`_updated_${e}s`,"[]").toString())}const G="https://raw.githubusercontent.com/m4fn3/AddonManagerDatabase/master/",it=G+"plugins.json",ct=G+"themes.json",st=G+"plugins_update.txt",dt=G+"themes_update.txt",mt=G+"compatibility.json";function H(e){return`${e}?${Date.now()}`}function ut(e,n){return`${G}${e}s/${n}.json`}function de(e){try{return JSON.parse(A(g,e,"{}").toString())}catch{return{}}}function Y(){return de("plugins")}function W(){return de("themes")}function ht(){return de("compatibility")}function Pe(){O.get(H(it)).then(e=>{v(g,"plugins",e.text)})}function Ne(){O.get(H(ct)).then(e=>{v(g,"themes",e.text)})}function gt(){O.get(H(st)).then(e=>{let n=e.text,o=A(g,"plugins_ver");o?o!=n&&(v(g,"plugins_ver",n),Pe()):(v(g,"plugins_ver",n),Pe())})}function Et(){O.get(H(dt)).then(e=>{let n=e.text,o=A(g,"themes_ver");o?o!=n&&(v(g,"themes_ver",n),Ne()):(v(g,"themes_ver",n),Ne())})}const xe=ae.createStackNavigator(),{ThemeColorMap:V}=we;var wt=({name:e="AddonManager",component:n=ie,detail:o=null}={})=>{const l=M.createThemedStyleSheet({container:{backgroundColor:V.BACKGROUND_MOBILE_SECONDARY,flex:1},cardStyle:{backgroundColor:V.BACKGROUND_MOBILE_PRIMARY,color:V.TEXT_NORMAL},header:{backgroundColor:V.BACKGROUND_MOBILE_SECONDARY,shadowColor:"transparent",elevation:0},headerText:{color:V.HEADER_PRIMARY},headerButton:{color:V.HEADER_PRIMARY}});let E,m;return o&&(m=A(m,"_selected_plugin").toString(),E=L(m)),t.createElement(Ge.NavigationContainer,{independent:!0},t.createElement(xe.Navigator,{initialRouteName:e,style:l.container,screenOptions:{cardOverlayEnabled:!1,cardShadowEnabled:!1,cardStyle:l.cardStyle,headerStyle:l.header,headerTitleContainerStyle:l.headerTitleContainer,headerTitleAlign:"center",safeAreaInsets:{top:0}}},t.createElement(xe.Screen,{name:e,component:n,options:{headerTitleStyle:{color:"white"},headerLeft:()=>t.createElement(ve,{color:l.headerButton.color,title:"Close",onPress:()=>Q.pop()}),headerRight:()=>o?t.createElement(ve,{color:l.headerButton.color,title:E?"Uninstall":"Install",onPress:()=>{if(E)ce(m,()=>Q.pop());else{const S=Y();U(m,S[m].url,()=>Q.pop())}}}):t.createElement(t.Fragment,null),...ae.TransitionPresets.ModalPresentationIOS}})))};const{ThemeColorMap:Ae}=we;function ke({height:e,width:n,...o}){const l=M.createThemedStyleSheet({icon:{color:Ae.INTERACTIVE_NORMAL,opacity:.75,marginLeft:.5}});return t.createElement(F.Svg,{viewBox:"0 0 24 24",style:{height:e,width:n,...l.icon},fill:"currentColor",...o},t.createElement(F.Path,{d:"M0 0h24v24H0z",fill:"none"}),t.createElement(F.Path,{d:"M20.5 11H19V7c0-1.1-.9-2-2-2h-4V3.5C13 2.12 11.88 1 10.5 1S8 2.12 8 3.5V5H4c-1.1 0-1.99.9-1.99 2v3.8H3.5c1.49 0 2.7 1.21 2.7 2.7s-1.21 2.7-2.7 2.7H2V20c0 1.1.9 2 2 2h3.8v-1.5c0-1.49 1.21-2.7 2.7-2.7 1.49 0 2.7 1.21 2.7 2.7V22H17c1.1 0 2-.9 2-2v-4h1.5c1.38 0 2.5-1.12 2.5-2.5S21.88 11 20.5 11z"}))}function Be({height:e,width:n,...o}){const l=M.createThemedStyleSheet({icon:{color:Ae.INTERACTIVE_NORMAL,opacity:.75,marginLeft:.5}});return t.createElement(F.Svg,{viewBox:"0 0 24 24",style:{height:e,width:n,...l.icon},fill:"currentColor",...o},t.createElement(F.Path,{d:"M0 0h24v24H0z",fill:"none"}),t.createElement(F.Path,{d:"M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8zm-5.5 9c-.83 0-1.5-.67-1.5-1.5S5.67 9 6.5 9 8 9.67 8 10.5 7.33 12 6.5 12zm3-4C8.67 8 8 7.33 8 6.5S8.67 5 9.5 5s1.5.67 1.5 1.5S10.33 8 9.5 8zm5 0c-.83 0-1.5-.67-1.5-1.5S13.67 5 14.5 5s1.5.67 1.5 1.5S15.33 8 14.5 8zm3 4c-.83 0-1.5-.67-1.5-1.5S16.67 9 17.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"}))}function pt(){const e=M.createThemedStyleSheet({container:{flex:1,backgroundColor:h.ThemeColorMap.BACKGROUND_PRIMARY}}),n=z.useNavigation(),o=Y(),[l,E]=t.useState(""),[m,S]=t.useState(Z().map(a=>a.name));return t.createElement(t.Fragment,null,t.createElement(Ie,{placeholder:"Search plugins",onChangeText:a=>E(a)}),t.createElement($,{style:e.container},Object.keys(o).sort().filter(a=>a.toLowerCase().includes(l.toLowerCase())).map(a=>t.createElement(r,{label:o[a].version?`${a} - v${o[a].version}`:a,subLabel:o[a].description,leading:m.includes(a)?t.createElement(r.Icon,{source:u.Uninstall}):t.createElement(r.Icon,{source:u.Download}),trailing:r.Arrow,onPress:()=>{v(g,"_selected_plugin",a),n.navigate("PluginDetail")},onLongPress:()=>{m.includes(a)?ce(a,()=>{let d=Object.assign([],m);d.splice(d.indexOf(a),1),S(d)}):U(a,o[a].url,()=>{let d=Object.assign([],m);d.push(a),S(d)})}}))))}function ft(){const e=M.createThemedStyleSheet({container:{flex:1,backgroundColor:h.ThemeColorMap.BACKGROUND_PRIMARY}}),n=z.useNavigation(),o=W(),[l,E]=t.useState(""),[m,S]=t.useState(ne().map(a=>a.name));return t.createElement(t.Fragment,null,t.createElement(Ie,{placeholder:"Search themes",onChangeText:a=>E(a)}),t.createElement($,{style:e.container},Object.keys(o).sort().filter(a=>a.toLowerCase().includes(l.toLowerCase())).map(a=>t.createElement(r,{label:o[a].version?`${a} - v${o[a].version}`:a,subLabel:o[a].description,leading:m.includes(a)?t.createElement(r.Icon,{source:u.Uninstall}):t.createElement(r.Icon,{source:u.Download}),trailing:r.Arrow,onPress:()=>{v(g,"_selected_theme",a),n.navigate("ThemeDetail")}}))))}function yt(){let e=A(g,"check_updates");if(e===void 0)v(g,"check_updates",!1);else if(e){const n=Y(),o=W();let l=ue(n),E=he(o);if(l.length||E.length){let m=l.concat(E).join(", ");x.open({content:`Updates are available for ${m}`,source:u.Download})}}}function me(e,n){return n.localeCompare(e,void 0,{numeric:!0})}function De(e,n){return me(e,n)===1}function ue(e){return Z().map(n=>n.name).filter(n=>Object.keys(e).includes(n)&&Object.keys(e[n]).includes("version")&&L(n).version&&De(L(n).version,e[n].version))}function he(e){return ne().map(n=>n.name).filter(n=>Object.keys(e).includes(n)&&Object.keys(e[n]).includes("version")&&j(n).version&&De(j(n).version,e[n].version))}function bt(){const e=M.createThemedStyleSheet({container:{flex:1,backgroundColor:h.ThemeColorMap.BACKGROUND_PRIMARY}}),n=z.useNavigation(),o=z.useIsFocused(),l=Y(),E=W(),m=ue(l),S=he(E);let[a,d]=t.useState(m.length?m:["@"]),[_,i]=t.useState(S.length?S:["@"]);const[w,k]=t.useState(Boolean(A(g,"check_updates")));return t.useEffect(()=>{let s=se("plugin"),p=Object.assign([],a.filter(B=>!s.includes(B)));d(p.length?p:["@"]);let f=se("theme"),q=Object.assign([],_.filter(B=>!f.includes(B)));i(q.length?q:["@"])},[o]),t.createElement($,{style:e.container},t.createElement(N,{title:"UPDATE"},t.createElement(r,{label:"Check updates on startup",leading:t.createElement(r.Icon,{source:u.Update}),trailing:t.createElement(Re,{value:w,onValueChange:s=>{k(s),v(g,"check_updates",s)}})})),t.createElement(N,{title:"PLUGINS"},a.map(s=>s==="@"?t.createElement(r,{label:"No updates are found for plugins"}):t.createElement(r,{label:s&&`${s} - v${L(s).version} -> v${l[s].version}`,subLabel:l[s].description,leading:t.createElement(r.Icon,{source:u.Download}),trailing:r.Arrow,onPress:()=>{v(g,"_selected_plugin",s),n.navigate("PluginDetail")},onLongPress:()=>{U(s,l[s].url,()=>{oe("plugin",s);let p=Object.assign([],a);p.splice(p.indexOf(s),1),d(p.length?p:["@"])})}}))),t.createElement(N,{title:"THEMES"},_.map(s=>s==="@"?t.createElement(r,{label:"No updates are found for themes"}):t.createElement(r,{label:s&&`${s} - v${j(s).version} -> v${E[s].version}`,subLabel:E[s].description,leading:t.createElement(r.Icon,{source:u.Download}),trailing:r.Arrow,onPress:()=>{v(g,"_selected_theme",s),n.navigate("ThemeDetail")},onLongPress:()=>{te(s,E[s].url,()=>{oe("theme",s);let p=Object.assign([],_);p.splice(p.indexOf(s),1),i(p.length?p:["@"])})}}))))}const St=K("updateNote");async function vt(e){let n=await(await fetch(`https://discord.com/api/v9/users/@me/notes/${e}`,{method:"GET",credentials:"include",headers:{authorization:je.getToken()}})).json();return Object.keys(n).includes("note")?n.note:""}function Tt(e,n){St.updateNote(e,n)}function Rt(){const e=M.createThemedStyleSheet({container:{flex:1,backgroundColor:h.ThemeColorMap.BACKGROUND_PRIMARY},importText:{color:"white",height:40,paddingLeft:15}}),n=Y(),o=W(),[l,E]=t.useState({"":{}}),[m,S]=t.useState({"":{}});function a(i){const w=Z().map(f=>f.name),k=ne().map(f=>f.name);let s={},p={};i[0].split(";").filter(f=>Object.keys(n).includes(f)).forEach(f=>{s[f]=Object.assign(n[f],{installed:w.includes(f)})}),E(Object.keys(s).length?s:{"":{}}),i[1].split(";").filter(f=>Object.keys(o).includes(f)).forEach(f=>{p[f]=Object.assign(o[f],{installed:k.includes(f)})}),S(Object.keys(p).length?p:{"":{}})}function d(i,w=void 0){let k=i.split("|");if(k.length!=2){let s=w||"Invalid text format. Please make sure that you entered correct text.";return x.open({content:s,source:u.Fail}),!1}else return k}let _;return t.createElement($,{style:e.container},t.createElement(N,{title:"IMPORT"},t.createElement(r,{style:e.importBackup,label:"Import from backup",subLabel:"Import installed addons from backup that linked to your discord account.",leading:t.createElement(r.Icon,{source:u.Import}),trailing:r.Arrow,onPress:()=>{vt("1048982327809818706").then(i=>{let w=d(i,"No backup was found.");w&&(a(w),x.open({content:"Successfully imported addons from backup!",source:u.Check}))})}})),t.createElement(N,null,t.createElement(Ve,{style:e.importText,ref:i=>{_=i},placeholder:"Paste exported text",onSubmitEditing:i=>{let w=d(i.nativeEvent.text);w&&a(w)}}),t.createElement(r,{label:"Clear Input",trailing:r.Arrow,onPress:()=>{_.clear(),E({"":{}}),S({"":{}})}})),t.createElement(N,{title:"PLUGINS"},Object.keys(l).map(i=>l[i].url?t.createElement(r,{label:l[i].version?`${i} - v${l[i].version}`:i,subLabel:l[i].description,leading:l[i].installed?t.createElement(r.Icon,{source:u.Check}):t.createElement(r.Icon,{source:u.Download}),trailing:l[i].installed?void 0:r.Arrow,onPress:()=>{U(i,n[i].url,()=>{let w=Object.assign({},l);w[i].installed=!0,E(w)})}}):t.createElement(r,{label:"There are no imported plugins yet"}))),t.createElement(N,{title:"THEMES"},Object.keys(m).map(i=>m[i].url?t.createElement(r,{label:m[i].version?`${i} - v${m[i].version}`:i,subLabel:m[i].description,leading:m[i].installed?t.createElement(r.Icon,{source:u.Check}):t.createElement(r.Icon,{source:u.Download}),trailing:m[i].installed?void 0:r.Arrow,onPress:()=>{te(i,o[i].url,()=>{let w=Object.assign({},m);w[i].installed=!0,S(w)})}}):t.createElement(r,{label:"There are no imported themes yet"}))))}function $e(){let e=Z().map(o=>o.name).join(";"),n=ne().map(o=>o.name).join(";");return`${e}|${n}`}function _t(){const e=M.createThemedStyleSheet({container:{flex:1,backgroundColor:h.ThemeColorMap.BACKGROUND_PRIMARY}}),[n,o]=t.useState(Boolean(A(g,"auto_backup")));return t.createElement($,{style:e.container},t.createElement(N,{title:"EXPORT"},t.createElement(r,{label:"Automatically create backup",subLabel:"Automatically save backup of installed addons. It will be linked with your discord account.",leading:t.createElement(r.Icon,{source:u.Export}),trailing:t.createElement(Re,{value:n,onValueChange:l=>{o(l),v(g,"auto_backup",l)}})})),t.createElement(N,{title:"ADVANCED"},t.createElement(r,{label:"Export addons as text",subLabel:"Export installed addons as text that you can import manually.",leading:t.createElement(r.Icon,{source:u.Copy}),trailing:r.Arrow,onPress:()=>{Me.setString($e()),x.open({content:"Copied addon list to clipboard!",source:u.Copy})}})))}const{native:re}=window.enmity,ge=re.version;re.build,re.device,re.version;function Le({addonType:e}){let n=at("PRIMARY_DARK_500");n=n||h.ThemeColorMap.BACKGROUND_SECONDARY;const o=M.createThemedStyleSheet({container:{flex:1,backgroundColor:h.ThemeColorMap.BACKGROUND_PRIMARY,padding:10},previews:{marginTop:20,justifyContent:"center"},addonName:{color:h.ThemeColorMap.TEXT_NORMAL,fontFamily:h.Fonts.PRIMARY_SEMIBOLD,fontSize:20},addonText:{borderBottomWidth:1,borderBottomColor:h.ThemeColorMap.HEADER_PRIMARY,paddingBottom:20},sectionTitle:{marginTop:20,marginLeft:15,color:h.ThemeColorMap.HEADER_PRIMARY},sectionContent:{margin:10,borderRadius:10,borderWidth:1,borderColor:h.ThemeColorMap.HEADER_PRIMARY,color:h.ThemeColorMap.TEXT_NORMAL,padding:10},addonEdit:{backgroundColor:n,paddingTop:10,paddingBottom:10,borderRadius:20,borderWidth:1,width:80,alignItems:"center",borderColor:n,overflow:"hidden"},addonEditText:{color:ot(n,h.ThemeColorMap.TEXT_NORMAL[0],h.ThemeColorMap.TEXT_NORMAL[1]),fontFamily:h.Fonts.PRIMARY_SEMIBOLD},hyperLink:{color:h.ThemeColorMap.TEXT_LINK}}),l=et.useWindowDimensions().width,[E,m]=t.useState(["Loading description..."]),[S,a]=t.useState([]),d=A(g,`_selected_${e}`).toString(),_=e=="plugin"?Y():W(),i=_[d];let w=e=="plugin"?ue(_):he(_),k=e=="plugin"?Boolean(L(d)):Boolean(j(d)),s=w.includes(d);const[p,f]=t.useState(s),[q,B]=t.useState(k?p?"UPDATE":"REMOVE":"GET"),[Ee,Fe]=t.useState(void 0);return t.useEffect(()=>{O.get(H(ut(e,d))).then(b=>{let T=JSON.parse(b.text),C=T.description.replace(/(\bhttps?:\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*)/ig,"<l>$1<l>").split("<l>");m(C);let D=Object.assign(T.images.map(I=>({url:I,width:1,height:1,type:"image"})),T.videos.map(I=>({url:I,width:null,height:null,type:"video"})));a(D)}).catch(b=>{b.status===404&&m(["No description."])});const y=ht();if(d in y[e]){let b=y[e][d].ver.split("~"),T=b[0]?b[0]:"0.0",C=b[1]?b[1]:"999.0";me(T,ge)>=0&&me(ge,C)>=0||Fe(y[e][d].text+`

Compatibility: ${y[e][d].ver} ( currently on ${ge})`)}},[]),t.createElement($,{style:o.container},t.createElement(r,{style:o.addonText,label:()=>t.createElement(P,{style:o.addonName},d),leading:e=="plugin"?t.createElement(ke,{width:32,height:32}):t.createElement(Be,{width:32,height:32}),trailing:t.createElement(Ke,{style:o.addonEdit,onPress:()=>{e=="plugin"?L(d)&&!p?ce(d,()=>B("GET")):U(d,i.url,()=>{f(!1),oe(e,d),B("REMOVE")}):j(d)&&!p?rt(d,()=>B("GET")):te(d,i.url,()=>{f(!1),oe(e,d),B("REMOVE")})}},t.createElement(P,{style:o.addonEditText},q)),subLabel:i.description}),[1].filter(y=>Boolean(Ee)).map(y=>t.createElement(t.Fragment,null,t.createElement(P,{style:[o.sectionTitle,{color:"#e74c3c",fontFamily:h.Fonts.PRIMARY_SEMIBOLD}]},"Notice"),t.createElement(P,{style:[o.sectionContent,{borderColor:"#e74c3c"}]},Ee))),t.createElement(Ye,{horizontal:!0,data:S,style:o.previews,renderItem:({index:y,item:b})=>{if(b.type=="image")return t.createElement(Te,{style:{width:b.width,height:b.height,margin:5},source:{uri:b.url},onLoad:({nativeEvent:{source:{width:T,height:C}}})=>{let D=T/C;T=D<1?l*2/5:l*2/3,C=T/D;let I=Object.assign([],S);I[y].width=T,I[y].height=C,a(I)}});if(b.type=="video")return t.createElement(tt,{style:{width:b.width,height:b.height},source:{uri:b.url},controls:!0,paused:!0,onLoad:({naturalSize:{width:T,height:C}})=>{let D=T/C;T=D<1?l*2/5:l*2/3,C=T/D;let I=Object.assign([],S);I[y].width=T,I[y].height=C,a(I)}})},showsHorizontalScrollIndicator:!0}),t.createElement(P,{style:o.sectionTitle},"Description"),t.createElement(P,{style:o.sectionContent},E.map(y=>y.startsWith("http")?t.createElement(P,{style:o.hyperLink,onPress:()=>{let b=e=="plugin"?".js":".json";y.endsWith(b)?e=="plugin"?U(d,y):te(d,y):ee.openURL(y)},onLongPress:()=>{Me.setString(y),x.open({content:"Copied URL to clipboard",source:u.Copy})}},y):t.createElement(P,null,y))))}const J=ae.createStackNavigator();function Oe(){return t.createElement(J.Navigator,{initialRouteName:"Home",headerMode:"screen",screenOptions:{...nt}},t.createElement(J.Screen,{name:"Home",component:Ct,options:{headerShown:!1}}),[[pt,"Plugins"],[ft,"Themes"],[_t,"Export"],[Rt,"Import"],[bt,"Update"]].map(([e,n])=>t.createElement(J.Screen,{name:n,component:e})),t.createElement(J.Screen,{name:"PluginDetail",component:()=>t.createElement(Le,{addonType:"plugin"}),options:{title:""}}),t.createElement(J.Screen,{name:"ThemeDetail",component:()=>t.createElement(Le,{addonType:"theme"}),options:{title:""}}))}function Ct(){const e=M.createThemedStyleSheet({container:{backgroundColor:h.ThemeColorMap.BACKGROUND_PRIMARY},header:{flexDirection:"row",justifyContent:"center",alignItems:"center"},image:{width:70,height:70,marginTop:20,marginLeft:20},title:{flexDirection:"column"},name:{fontSize:30,paddingTop:20,paddingLeft:20,paddingRight:30,color:h.ThemeColorMap.HEADER_PRIMARY},author:{fontSize:15,paddingLeft:50,color:h.ThemeColorMap.HEADER_SECONDARY},info:{height:45,paddingTop:3,paddingBottom:3,justifyContent:"center",alignItems:"center"},footer:{color:h.ThemeColorMap.HEADER_SECONDARY,textAlign:"center",paddingTop:10,paddingBottom:20}}),n=z.useNavigation();return t.useEffect(()=>{O.get(H(mt)).then(o=>{v(g,"compatibility",o.text)})},[]),t.createElement($,{style:e.container},t.createElement(ie,{style:e.header},t.createElement(Te,{source:{uri:"https://avatars.githubusercontent.com/u/43488869"},style:e.image}),t.createElement(ie,{style:e.title},t.createElement(P,{style:e.name},"AddonManager"),t.createElement(P,{style:e.author},"by mafu"))),t.createElement(N,{title:"STORE"},t.createElement(r,{label:"Browse plugins",leading:t.createElement(ke,{width:24,height:24}),trailing:r.Arrow,onPress:()=>{n.navigate("Plugins")}}),t.createElement(r,{label:"Browse themes",leading:t.createElement(Be,{width:24,height:24}),trailing:r.Arrow,onPress:()=>{n.navigate("Themes")}}),t.createElement(r,{label:"Export addons",leading:t.createElement(r.Icon,{source:u.Export}),trailing:r.Arrow,onPress:()=>{n.navigate("Export")}}),t.createElement(r,{label:"Import addons",leading:t.createElement(r.Icon,{source:u.Import}),trailing:r.Arrow,onPress:()=>{n.navigate("Import")}}),t.createElement(r,{label:"Update addons",leading:t.createElement(r.Icon,{source:u.Update}),trailing:r.Arrow,onPress:()=>{n.navigate("Update")}})),t.createElement(N,{title:"INFORMATION"},t.createElement(r,{label:"Follow me on Twitter",style:e.info,trailing:r.Arrow,leading:t.createElement(r.Icon,{source:u.Twitter}),onPress:()=>{ee.openURL("https://twitter.com/m4fn3")}}),t.createElement(r,{label:"Visit my server for help",style:e.info,trailing:r.Arrow,leading:t.createElement(r.Icon,{source:u.Discord}),onPress:()=>{Qe.acceptInviteAndTransitionToInviteChannel({inviteKey:"TrCqPTCrdq",context:{location:"Invite Button Embed"},callback:()=>{n.pop()}})}}),t.createElement(r,{label:"Check Source on GitHub",style:e.info,trailing:r.Arrow,leading:t.createElement(r.Icon,{source:u.GitHub}),onPress:()=>{ee.openURL("https://github.com/m4fn3/AddonManager")}})),t.createElement(P,{style:e.footer},`v${_e}`))}const It={id:"addon",name:"addon",displayName:"addon",description:"Open AddonManager",displayDescription:"Open AddonManager",type:le.Chat,execute:async function(e,n){Q.push(wt,{component:Oe,name:"AddonManager"})}};ee.addEventListener("url",e=>{let n=e.url;n=decodeURIComponent(n.replace("com.hammerandchisel.discord://",""));try{const o=JSON.parse(n);A(g,"auto_backup")&&typeof o.data=="string"&&["installed_theme","overridden_theme","installed_plugin","overridden_plugin"].includes(o.data)&&Tt("1048982327809818706",$e())}catch{return}});const Mt=He("AddonManager"),Pt={...Je,onStart(){this.commands=[It],["plugin","theme"].forEach(e=>lt(e)),gt(),Et(),yt()},onStop(){Mt.unpatchAll()},getSettingsPanel({settings:e}){return t.createElement(Oe,null)}};Ue(Pt);
