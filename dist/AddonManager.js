function ot(e){window.enmity.plugins.registerPlugin(e)}function F(e){return window.enmity.plugins.getPlugin(e)}function ne(){return window.enmity.plugins.getPlugins()}const g=window.enmity.modules.common.Constants;window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets,window.enmity.modules.common.Messages,window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const t=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage;const A=window.enmity.modules.common.Toasts,oe=window.enmity.modules.common.Dialog,at=window.enmity.modules.common.Token,$=window.enmity.modules.common.REST;window.enmity.modules.common.Settings,window.enmity.modules.common.Users;const me=window.enmity.modules.common.Navigation,rt=window.enmity.modules.common.NavigationNative,ue=window.enmity.modules.common.NavigationStack;window.enmity.modules.common.Theme;const z=window.enmity.modules.common.Linking,M=window.enmity.modules.common.StyleSheet;window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux;const j=window.enmity.modules.common.SVG,lt=window.enmity.modules.common.Scenes;window.enmity.modules.common.Moment;function it(e){return window.enmity.patcher.create(e)}var u="AddonManager",Me="1.1.5",st="Manage plugins & themes easily!",ct=[{name:"mafu",id:"519760564755365888"}],dt="#00ffff",mt={name:u,version:Me,description:st,authors:ct,color:dt};function y(e,n,o){window.enmity.settings.set(e,n,o)}function v(e,n,o){return window.enmity.settings.get(e,n,o)}const H="https://raw.githubusercontent.com/m4fn3/AddonManagerDatabase/master/",ut=H+"plugins.json",gt=H+"themes.json",ht=H+"plugins_update.txt",pt=H+"themes_update.txt",Et=H+"compatibility.json";function Y(e){return`${e}?${Date.now()}`}function wt(e,n){return`${H}${e}s/${n}.json`}function ge(e){try{return JSON.parse(v(u,e,"{}").toString())}catch{return{}}}function X(){return ge("plugins")}function W(){return ge("themes")}function yt(){return ge("compatibility")}function _e(){$.get(Y(ut)).then(e=>{y(u,"plugins",e.text)})}function Pe(){$.get(Y(gt)).then(e=>{y(u,"themes",e.text)})}function ft(){$.get(Y(ht)).then(e=>{let n=e.text,o=v(u,"plugins_ver");o?o!=n&&(y(u,"plugins_ver",n),_e()):(y(u,"plugins_ver",n),_e())})}function bt(){$.get(Y(pt)).then(e=>{let n=e.text,o=v(u,"themes_ver");o?o!=n&&(y(u,"themes_ver",n),Pe()):(y(u,"themes_ver",n),Pe())})}function S(e){return window.enmity.assets.getIDByName(e)}const ae={byProps:(...e)=>window.enmity.modules.filters.byProps(...e),byName:(e,n)=>window.enmity.modules.filters.byName(e,n),byTypeName:(e,n)=>window.enmity.modules.filters.byTypeName(e,n),byDisplayName:(e,n)=>window.enmity.modules.filters.byDisplayName(e,n)};function vt(...e){return window.enmity.modules.bulk(...e)}function G(...e){return window.enmity.modules.getByProps(...e)}function he(...e){return window.enmity.modules.getByName(...e)}function St(...e){return window.enmity.modules.getByKeyword(...e)}window.enmity.modules.common;const Tt=he("Icon"),J=St("getFocusedRoute"),Re=he("StaticSearchBarContainer"),Ct=G("acceptInviteAndTransitionToInviteChannel"),Mt=G("AppState"),_t=G("DRMType","FilterType").default,Ie=G("setString"),h={Copy:S("ic_message_copy"),GitHub:S("img_account_sync_github_white"),Twitter:S("img_account_sync_twitter_white"),Discord:S("Discord"),Update:S("toast_image_saved"),Export:S("ic_reply_24px"),Import:S("ic_leave_stage"),Fail:S("Small"),Download:S("ic_download_24px"),Check:S("ic_check_24px"),Clear:S("ic_input_clear_24px"),Uninstall:S("ic_trash_24px"),Settings:S("ic_settings_white_24px"),Add:S("hub-add"),SettingIcon:S("ic_rulebook")},q=M.createThemedStyleSheet({cardStyle:{backgroundColor:g.ThemeColorMap.BACKGROUND_MOBILE_PRIMARY,color:g.ThemeColorMap.TEXT_NORMAL},header:{backgroundColor:g.ThemeColorMap.BACKGROUND_MOBILE_SECONDARY,shadowColor:"transparent",elevation:0},headerText:{color:g.ThemeColorMap.HEADER_PRIMARY}}),Pt={cardStyle:q.cardStyle,headerStyle:q.header,headerTitleContainerStyle:q.headerText,headerTitleStyle:q.headerText,headerBackTitleStyle:q.headerText,headerBackImage:()=>t.createElement(Tt,{source:S("ios-back")}),headerTitleAlign:"center",safeAreaInsets:{top:0}};function Rt(e,n,o,a=186){let s=e.replace("#","");const m=(l,i,p)=>parseInt(l.substring(i[0],i[1]),p),w=m(s,[0,2],16),E=m(s,[2,4],16),f=m(s,[4,6],16);return(w+E+f)/(255*3)>a?o:n}function Z(e,n,o=()=>{}){window.enmity.plugins.installPlugin(n,a=>{a.name===void 0?A.open({content:`Failed to install ${e}`,source:h.Fail}):(A.open({content:`Successfully installed ${e}!`,source:h.Check}),o())})}function Ne(e,n=()=>{}){window.enmity.plugins.uninstallPlugin(e,o=>{A.open({content:`Successfully uninstalled ${e}!`,source:h.Check}),n()})}function re(e,n,o=()=>{}){window.enmity.themer.installTheme(n,a=>{A.open({content:`Successfully installed ${e}!`,source:h.Check}),o()})}function It(e,n=()=>{}){window.enmity.themer.uninstallTheme(e,o=>{A.open({content:`Successfully uninstalled ${e}!`,source:h.Check}),n()})}function V(e){return window.enmity.themer.getThemeByName(e)}function le(){return window.enmity.themer.listThemes()}function Nt(e){try{let n=V(window.enmity.themer.getTheme());return n?n.colours[e]:void 0}catch{return}}function ie(e,n){let o=pe("plugin");o.push(n),y(u,`_updated_${e}s`,JSON.stringify(o))}function At(e){y(u,`_updated_${e}s`,"[]")}function pe(e){return JSON.parse(v(u,`_updated_${e}s`,"[]").toString())}function kt(){let e=v(u,"check_updates");if(e===void 0)y(u,"check_updates",!1);else if(e){const n=X(),o=W();let a=we(n),s=ye(o);if(a.length||s.length){let m=a.concat(s).join(", ");A.open({content:`Updates are available for ${m}`,source:h.Download})}}}function Ee(e,n){return n.localeCompare(e,void 0,{numeric:!0})}function Ae(e,n){return Ee(e,n)===1}function we(e){return ne().map(n=>n.name).filter(n=>Object.keys(e).includes(n)&&Object.keys(e[n]).includes("version")&&F(n).version&&Ae(F(n).version,e[n].version))}function ye(e){return le().map(n=>n.name).filter(n=>Object.keys(e).includes(n)&&Object.keys(e[n]).includes("version")&&V(n).version&&Ae(V(n).version,e[n].version))}const{components:d}=window.enmity;d.Alert;const xt=d.Button,$t=d.FlatList,ke=d.Image;d.ImageBackground,d.KeyboardAvoidingView,d.Modal,d.Pressable,d.RefreshControl;const D=d.ScrollView;d.SectionList,d.StatusBar,d.StyleSheet,d.Switch;const P=d.Text,Dt=d.TextInput;d.TouchableHighlight;const Ot=d.TouchableOpacity;d.TouchableWithoutFeedback,d.Touchable;const se=d.View;d.VirtualizedList,d.Form;const Lt=d.FormArrow;d.FormCTA,d.FormCTAButton,d.FormCardSection,d.FormCheckbox;const Bt=d.FormDivider;d.FormHint,d.FormIcon,d.FormInput,d.FormLabel,d.FormRadio;const r=d.FormRow,R=d.FormSection;d.FormSelect,d.FormSubLabel;const ce=d.FormSwitch;d.FormTernaryCheckBox,d.FormText,d.FormTextColors,d.FormTextSizes;const Ft=G("updateNote");async function Ut(e){let n=await(await fetch(`https://discord.com/api/v9/users/@me/notes/${e}`,{method:"GET",credentials:"include",headers:{authorization:at.getToken()}})).json();return Object.keys(n).includes("note")?n.note:""}function xe(e,n){Ft.updateNote(e,n)}function fe(){let e=ne().map(o=>o.name).join(";"),n=le().map(o=>o.name).join(";");return`${e}|${n}`}function $e(){const e=M.createThemedStyleSheet({container:{flex:1,backgroundColor:g.ThemeColorMap.BACKGROUND_PRIMARY}}),[n,o]=t.useState(Boolean(v(u,"auto_backup")));return t.createElement(D,{style:e.container},t.createElement(R,{title:"EXPORT"},t.createElement(r,{label:"Automatically create backup",subLabel:"Automatically save backup of installed addons. It will be linked with your discord account.",leading:t.createElement(r.Icon,{source:h.Export}),trailing:t.createElement(ce,{value:n,onValueChange:a=>{o(a),a&&xe("1048982327809818706",fe()),y(u,"auto_backup",a)}})})),t.createElement(R,{title:"ADVANCED"},t.createElement(r,{label:"Export addons as text",subLabel:"Export installed addons as text that you can import manually.",leading:t.createElement(r.Icon,{source:h.Copy}),trailing:r.Arrow,onPress:()=>{Ie.setString(fe()),A.open({content:"Copied addon list to clipboard!",source:h.Copy})}})))}z.addEventListener("url",e=>{let n=e.url;n=decodeURIComponent(n.replace("com.hammerandchisel.discord://",""));try{const o=JSON.parse(n);v(u,"auto_backup")&&typeof o.data=="string"&&["installed_theme","overridden_theme","installed_plugin","overridden_plugin"].includes(o.data)&&xe("1048982327809818706",fe())}catch{return}});function De({height:e,width:n,...o}){const a=M.createThemedStyleSheet({icon:{color:g.ThemeColorMap.INTERACTIVE_NORMAL,opacity:.75,marginLeft:.5}});return t.createElement(j.Svg,{viewBox:"0 0 24 24",style:{height:e,width:n,...a.icon},fill:"currentColor",...o},t.createElement(j.Path,{d:"M0 0h24v24H0z",fill:"none"}),t.createElement(j.Path,{d:"M20.5 11H19V7c0-1.1-.9-2-2-2h-4V3.5C13 2.12 11.88 1 10.5 1S8 2.12 8 3.5V5H4c-1.1 0-1.99.9-1.99 2v3.8H3.5c1.49 0 2.7 1.21 2.7 2.7s-1.21 2.7-2.7 2.7H2V20c0 1.1.9 2 2 2h3.8v-1.5c0-1.49 1.21-2.7 2.7-2.7 1.49 0 2.7 1.21 2.7 2.7V22H17c1.1 0 2-.9 2-2v-4h1.5c1.38 0 2.5-1.12 2.5-2.5S21.88 11 20.5 11z"}))}function Oe({height:e,width:n,...o}){const a=M.createThemedStyleSheet({icon:{color:g.ThemeColorMap.INTERACTIVE_NORMAL,opacity:.75,marginLeft:.5}});return t.createElement(j.Svg,{viewBox:"0 0 24 24",style:{height:e,width:n,...a.icon},fill:"currentColor",...o},t.createElement(j.Path,{d:"M0 0h24v24H0z",fill:"none"}),t.createElement(j.Path,{d:"M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8zm-5.5 9c-.83 0-1.5-.67-1.5-1.5S5.67 9 6.5 9 8 9.67 8 10.5 7.33 12 6.5 12zm3-4C8.67 8 8 7.33 8 6.5S8.67 5 9.5 5s1.5.67 1.5 1.5S10.33 8 9.5 8zm5 0c-.83 0-1.5-.67-1.5-1.5S13.67 5 14.5 5s1.5.67 1.5 1.5S15.33 8 14.5 8zm3 4c-.83 0-1.5-.67-1.5-1.5S16.67 9 17.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"}))}const{native:Q}=window.enmity;function jt(){Q.reload()}const be=Q.version;Q.build,Q.device,Q.version;var Le=({content:e,addonType:n,addonName:o})=>{const a=M.createThemedStyleSheet({hyperLink:{color:g.ThemeColorMap.TEXT_LINK}});return e.replace(/(\bhttps?:\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*)/ig,"<l>$1<l>").split("<l>").map(s=>s.startsWith("http")?t.createElement(P,{style:a.hyperLink,onPress:()=>{let m=n=="plugin"?".js":".json";s.endsWith(m)?n=="plugin"?Z(o,s):re(o,s):z.openURL(s)},onLongPress:()=>{Ie.setString(s),A.open({content:"Copied URL to clipboard",source:h.Copy})}},s):t.createElement(P,null,s))};function K({addonType:e}){let n=Nt("PRIMARY_DARK_500"),o=n?Rt(n,g.ThemeColorMap.TEXT_NORMAL[0],g.ThemeColorMap.TEXT_NORMAL[1]):g.ThemeColorMap.HEADER_PRIMARY;n=n||g.ThemeColorMap.BACKGROUND_SECONDARY;const a=M.createThemedStyleSheet({container:{flex:1,backgroundColor:g.ThemeColorMap.BACKGROUND_PRIMARY,padding:10},previews:{marginTop:20,justifyContent:"center"},addonName:{color:g.ThemeColorMap.TEXT_NORMAL,fontFamily:g.Fonts.PRIMARY_SEMIBOLD,fontSize:20},addonText:{borderBottomWidth:1,borderBottomColor:g.ThemeColorMap.HEADER_PRIMARY,paddingBottom:20},sectionTitle:{marginTop:20,marginLeft:15,color:g.ThemeColorMap.HEADER_PRIMARY},sectionContent:{margin:10,borderRadius:10,borderWidth:1,borderColor:g.ThemeColorMap.HEADER_PRIMARY,color:g.ThemeColorMap.TEXT_NORMAL,padding:10},addonEdit:{backgroundColor:n,paddingTop:10,paddingBottom:10,borderRadius:20,borderWidth:1,width:80,alignItems:"center",borderColor:n,overflow:"hidden"},addonEditText:{color:o,fontFamily:g.Fonts.PRIMARY_SEMIBOLD},hyperLink:{color:g.ThemeColorMap.TEXT_LINK}}),s=Mt.useWindowDimensions().width,[m,w]=t.useState("Loading description..."),[E,f]=t.useState([]),l=v(u,`_selected_${e}`).toString(),i=e=="plugin"?X():W(),p=i[l];let k=e=="plugin"?we(i):ye(i),x=e=="plugin"?Boolean(F(l)):Boolean(V(l)),O=k.includes(l);const[c,T]=t.useState(O),[de,L]=t.useState(x?c?"UPDATE":"REMOVE":"GET"),[U,nt]=t.useState(void 0);return t.useEffect(()=>{$.get(Y(wt(e,l))).then(C=>{let b=JSON.parse(C.text);w(b.description);let I=Object.assign(b.images.map(N=>({url:N,width:1,height:1,type:"image"})),b.videos.map(N=>({url:N,width:null,height:null,type:"video"})));f(I)}).catch(C=>{C.status===404&&w("No description.")});const _=yt();if(l in _[e]){let C=!0;if(_[e][l].ver.includes("~")){let b=_[e][l].ver.split("~"),I=b[0]?b[0]:"0.0",N=b[1]?b[1]:"999.0";Ee(I,be)>=0&&Ee(be,N)>=0&&(C=!1)}C&&nt(_[e][l].text+`

Compatibility: ${_[e][l].ver} (currently on ${be})`)}},[]),t.createElement(D,{style:a.container},t.createElement(r,{style:a.addonText,label:()=>t.createElement(P,{style:a.addonName},l),leading:e=="plugin"?t.createElement(De,{width:32,height:32}):t.createElement(Oe,{width:32,height:32}),trailing:t.createElement(Ot,{style:a.addonEdit,onPress:()=>{e=="plugin"?F(l)&&!c?Ne(l,()=>L("GET")):Z(l,p.url,()=>{T(!1),ie(e,l),L("REMOVE")}):V(l)&&!c?It(l,()=>L("GET")):re(l,p.url,()=>{T(!1),ie(e,l),L("REMOVE")})}},t.createElement(P,{style:a.addonEditText},de)),subLabel:p.description}),[1].filter(_=>Boolean(U)).map(_=>t.createElement(t.Fragment,null,t.createElement(P,{style:[a.sectionTitle,{color:"#e74c3c",fontFamily:g.Fonts.PRIMARY_SEMIBOLD}]},"Notice"),t.createElement(P,{style:[a.sectionContent,{borderColor:"#e74c3c"}]},t.createElement(Le,{content:U,addonType:e,addonName:l})))),t.createElement($t,{horizontal:!0,data:E,style:a.previews,renderItem:({index:_,item:C})=>{if(C.type=="image")return t.createElement(ke,{style:{width:C.width,height:C.height,margin:5},source:{uri:C.url},onLoad:({nativeEvent:{source:{width:b,height:I}}})=>{let N=b/I;b=N<1?s*2/5:s*2/3,I=b/N;let B=Object.assign([],E);B[_].width=b,B[_].height=I,f(B)}});if(C.type=="video")return t.createElement(_t,{style:{width:C.width,height:C.height},source:{uri:C.url},controls:!0,paused:!0,onLoad:({naturalSize:{width:b,height:I}})=>{let N=b/I;b=N<1?s*2/5:s*2/3,I=b/N;let B=Object.assign([],E);B[_].width=b,B[_].height=I,f(B)}})},showsHorizontalScrollIndicator:!0}),t.createElement(P,{style:a.sectionTitle},"Description"),t.createElement(P,{style:a.sectionContent},t.createElement(Le,{content:m,addonType:e,addonName:l})))}function Be({isSetting:e=!1,renderPage:n=null}){const o=M.createThemedStyleSheet({container:{flex:1,backgroundColor:g.ThemeColorMap.BACKGROUND_PRIMARY}}),a=J.useNavigation(),s=X(),[m,w]=t.useState(""),[E,f]=t.useState(ne().map(l=>l.name));return t.createElement(t.Fragment,null,t.createElement(Re,{placeholder:"Search plugins",onChangeText:l=>w(l)}),t.createElement(D,{style:o.container},Object.keys(s).sort().filter(l=>l.toLowerCase().includes(m.toLowerCase())).map(l=>t.createElement(r,{label:s[l].version?`${l} - v${s[l].version}`:l,subLabel:s[l].description,leading:E.includes(l)?t.createElement(r.Icon,{source:h.Uninstall}):t.createElement(r.Icon,{source:h.Download}),trailing:r.Arrow,onPress:()=>{y(u,"_selected_plugin",l),e?n(a,{pageName:" ",pagePanel:()=>t.createElement(K,{addonType:"plugin"})}):a.navigate("PluginDetail")},onLongPress:()=>{E.includes(l)?Ne(l,()=>{let i=Object.assign([],E);i.splice(i.indexOf(l),1),f(i)}):Z(l,s[l].url,()=>{let i=Object.assign([],E);i.push(l),f(i)})}}))))}function Fe({isSetting:e=!1,renderPage:n=null}){const o=M.createThemedStyleSheet({container:{flex:1,backgroundColor:g.ThemeColorMap.BACKGROUND_PRIMARY}}),a=J.useNavigation(),s=W(),[m,w]=t.useState(""),[E,f]=t.useState(le().map(l=>l.name));return t.createElement(t.Fragment,null,t.createElement(Re,{placeholder:"Search themes",onChangeText:l=>w(l)}),t.createElement(D,{style:o.container},Object.keys(s).sort().filter(l=>l.toLowerCase().includes(m.toLowerCase())).map(l=>t.createElement(r,{label:s[l].version?`${l} - v${s[l].version}`:l,subLabel:s[l].description,leading:E.includes(l)?t.createElement(r.Icon,{source:h.Uninstall}):t.createElement(r.Icon,{source:h.Download}),trailing:r.Arrow,onPress:()=>{y(u,"_selected_theme",l),e?n(a,{pageName:" ",pagePanel:()=>t.createElement(K,{addonType:"theme"})}):a.navigate("ThemeDetail")}}))))}function Ue({isSetting:e=!1,renderPage:n=null}){const o=M.createThemedStyleSheet({container:{flex:1,backgroundColor:g.ThemeColorMap.BACKGROUND_PRIMARY}}),a=J.useNavigation(),s=J.useIsFocused(),m=X(),w=W(),E=we(m),f=ye(w);let[l,i]=t.useState(E.length?E:["@"]),[p,k]=t.useState(f.length?f:["@"]);const[x,O]=t.useState(Boolean(v(u,"check_updates",!0)));return t.useEffect(()=>{let c=pe("plugin"),T=Object.assign([],l.filter(U=>!c.includes(U)));i(T.length?T:["@"]);let de=pe("theme"),L=Object.assign([],p.filter(U=>!de.includes(U)));k(L.length?L:["@"])},[s]),t.createElement(D,{style:o.container},t.createElement(R,{title:"UPDATE"},t.createElement(r,{label:"Check updates on startup",leading:t.createElement(r.Icon,{source:h.Update}),trailing:t.createElement(ce,{value:x,onValueChange:c=>{O(c),y(u,"check_updates",c)}})})),t.createElement(R,{title:"PLUGINS"},l.map(c=>c==="@"?t.createElement(r,{label:"No updates are found for plugins"}):t.createElement(r,{label:c&&`${c} - v${F(c).version} -> v${m[c].version}`,subLabel:m[c].description,leading:t.createElement(r.Icon,{source:h.Download}),trailing:r.Arrow,onPress:()=>{y(u,"_selected_plugin",c),e?n(a,{pageName:" ",pagePanel:()=>t.createElement(K,{addonType:"plugin"})}):a.navigate("PluginDetail")},onLongPress:()=>{Z(c,m[c].url,()=>{ie("plugin",c);let T=Object.assign([],l);T.splice(T.indexOf(c),1),i(T.length?T:["@"])})}}))),t.createElement(R,{title:"THEMES"},p.map(c=>c==="@"?t.createElement(r,{label:"No updates are found for themes"}):t.createElement(r,{label:c&&`${c} - v${V(c).version} -> v${w[c].version}`,subLabel:w[c].description,leading:t.createElement(r.Icon,{source:h.Download}),trailing:r.Arrow,onPress:()=>{y(u,"_selected_theme",c),e?n(a,{pageName:" ",pagePanel:()=>t.createElement(K,{addonType:"theme"})}):a.navigate("ThemeDetail")},onLongPress:()=>{re(c,w[c].url,()=>{ie("theme",c);let T=Object.assign([],p);T.splice(T.indexOf(c),1),k(T.length?T:["@"])})}}))))}function je(){const e=M.createThemedStyleSheet({container:{flex:1,backgroundColor:g.ThemeColorMap.BACKGROUND_PRIMARY},importText:{color:"white",height:40,paddingLeft:15}}),n=X(),o=W(),[a,s]=t.useState({"":{}}),[m,w]=t.useState({"":{}});function E(i){const p=ne().map(c=>c.name),k=le().map(c=>c.name);let x={},O={};i[0].split(";").filter(c=>Object.keys(n).includes(c)).forEach(c=>{x[c]=Object.assign(n[c],{installed:p.includes(c)})}),s(Object.keys(x).length?x:{"":{}}),i[1].split(";").filter(c=>Object.keys(o).includes(c)).forEach(c=>{O[c]=Object.assign(o[c],{installed:k.includes(c)})}),w(Object.keys(O).length?O:{"":{}})}function f(i,p=void 0){let k=i.split("|");if(k.length!=2){let x=p||"Invalid text format. Please make sure that you entered correct text.";return A.open({content:x,source:h.Fail}),!1}else return k}let l;return t.createElement(D,{style:e.container},t.createElement(R,{title:"IMPORT"},t.createElement(r,{style:e.importBackup,label:"Import from backup",subLabel:"Import installed addons from backup that linked to your discord account.",leading:t.createElement(r.Icon,{source:h.Import}),trailing:r.Arrow,onPress:()=>{Ut("1048982327809818706").then(i=>{let p=f(i,"No backup was found.");p&&(E(p),A.open({content:"Successfully imported addons from backup!",source:h.Check}))})}})),t.createElement(R,null,t.createElement(Dt,{style:e.importText,ref:i=>{l=i},placeholder:"Paste exported text",onSubmitEditing:i=>{let p=f(i.nativeEvent.text);p&&E(p)}}),t.createElement(r,{label:"Clear Input",trailing:r.Arrow,onPress:()=>{l.clear(),s({"":{}}),w({"":{}})}})),t.createElement(R,{title:"PLUGINS"},Object.keys(a).map(i=>a[i].url?t.createElement(r,{label:a[i].version?`${i} - v${a[i].version}`:i,subLabel:a[i].description,leading:a[i].installed?t.createElement(r.Icon,{source:h.Check}):t.createElement(r.Icon,{source:h.Download}),trailing:a[i].installed?void 0:r.Arrow,onPress:()=>{Z(i,n[i].url,()=>{let p=Object.assign({},a);p[i].installed=!0,s(p)})}}):t.createElement(r,{label:"There are no imported plugins yet"}))),t.createElement(R,{title:"THEMES"},Object.keys(m).map(i=>m[i].url?t.createElement(r,{label:m[i].version?`${i} - v${m[i].version}`:i,subLabel:m[i].description,leading:m[i].installed?t.createElement(r.Icon,{source:h.Check}):t.createElement(r.Icon,{source:h.Download}),trailing:m[i].installed?void 0:r.Arrow,onPress:()=>{re(i,o[i].url,()=>{let p=Object.assign({},m);p[i].installed=!0,w(p)})}}):t.createElement(r,{label:"There are no imported themes yet"}))))}const Ht="https://github.com/m4fn3/AddonManager",Yt="https://raw.githubusercontent.com/m4fn3/AddonManager/master/manifest.json",Gt="https://raw.githubusercontent.com/m4fn3/AddonManager/master/dist/AddonManager.js",Vt="https://raw.githubusercontent.com/m4fn3/AddonManager/master/changelogs.json";function He(e,n){window.enmity.plugins.installPlugin(Gt,()=>{oe.show({title:"AddonManager",body:`Updated from ${e} to ${n}!
Do you want to reload Discord now?`,confirmText:"Yes",cancelText:"Later",onConfirm:()=>jt()})})}function ve(e=!1){$.get(Yt).then(n=>{const o=JSON.parse(n.text),a=F(o.name);o.version.localeCompare(a.version,void 0,{numeric:!0})===1?(e||!e&&v(u,"ignored",null)!=o.version)&&$.get(Vt).then(s=>{const m=JSON.parse(s.text);let w="";m[o.version]&&(w=`

- Changelogs
${m[o.version]}`),oe.show({title:"AddonManager",body:`New version v${o.version} is available!${w}`,confirmText:"Update",cancelText:"Ignore",onConfirm:()=>{y(u,"_updating",!0),He(a.version,o.version)},onCancel:()=>y(u,"ignored",o.version)})}):e?oe.show({title:"AddonManager",body:`You are using latest version v${a.version}!`,confirmText:"OK"}):y(u,"ignored",null)}).catch(n=>{n.status===404&&oe.show({title:"AddonManager",body:"Failed to check for updates. Please check GitHub manually.",confirmText:"GitHub",cancelText:"Close",onConfirm:()=>z.openURL(Ht)})})}function Ye(){const e=M.createThemedStyleSheet({container:{flex:1,backgroundColor:g.ThemeColorMap.BACKGROUND_PRIMARY}}),[n,o]=t.useState(Boolean(v(u,"check_updates_me",!0))),[a,s]=t.useState(Boolean(v(u,"add_to_settings",!0)));return t.createElement(D,{style:e.container},t.createElement(R,{title:"OPTIONS"},t.createElement(r,{label:"Check updates of AddonManager itself on startup",subLabel:"You can also click here to check updates manually",leading:t.createElement(r.Icon,{source:h.Update}),trailing:t.createElement(ce,{value:n,onValueChange:m=>{o(m),y(u,"check_updates_me",m)}}),onPress:()=>{ve(!0)}}),t.createElement(r,{label:"Add the AddonManager section to settings",leading:t.createElement(r.Icon,{source:h.Add}),trailing:t.createElement(ce,{value:a,onValueChange:m=>{s(m),y(u,"add_to_settings",m)}}),onPress:()=>{ve(!0)}})))}const Kt=he("HelpMessage"),ee=ue.createStackNavigator();function Se(){return t.createElement(ee.Navigator,{initialRouteName:"Home",headerMode:"screen",screenOptions:{...Pt}},t.createElement(ee.Screen,{name:"Home",component:Ge,options:{headerShown:!1}}),[[Be,"Plugins"],[Fe,"Themes"],[$e,"Export"],[je,"Import"],[Ue,"Update"],[Ye,"Settings"]].map(([e,n])=>t.createElement(ee.Screen,{name:n,component:e})),t.createElement(ee.Screen,{name:"PluginDetail",component:()=>t.createElement(K,{addonType:"plugin"}),options:{title:""}}),t.createElement(ee.Screen,{name:"ThemeDetail",component:()=>t.createElement(K,{addonType:"theme"}),options:{title:""}}))}function Ge({settings:e,renderPage:n}){const o=M.createThemedStyleSheet({container:{backgroundColor:g.ThemeColorMap.BACKGROUND_PRIMARY},header:{flexDirection:"row",justifyContent:"center",alignItems:"center"},image:{width:70,height:70,marginTop:20,marginLeft:20},title:{flexDirection:"column"},notice:{marginTop:30,marginLeft:20,marginRight:20},name:{fontSize:30,paddingTop:20,paddingLeft:20,paddingRight:30,color:g.ThemeColorMap.HEADER_PRIMARY},author:{fontSize:15,paddingLeft:50,color:g.ThemeColorMap.HEADER_SECONDARY},info:{height:45,paddingTop:3,paddingBottom:3,justifyContent:"center",alignItems:"center"},footer:{color:g.ThemeColorMap.HEADER_SECONDARY,textAlign:"center",paddingTop:10,paddingBottom:20}}),a=J.useNavigation();return t.useEffect(()=>{$.get(Y(Et)).then(s=>{y(u,"compatibility",s.text)})},[]),t.createElement(D,{style:o.container},t.createElement(se,{style:o.header},t.createElement(ke,{source:{uri:"https://avatars.githubusercontent.com/u/43488869"},style:o.image}),t.createElement(se,{style:o.title},t.createElement(P,{style:o.name},"AddonManager"),t.createElement(P,{style:o.author},"by mafu"))),v(u,"ignored",null)?t.createElement(se,{style:o.notice},t.createElement(Kt,{messageType:0},t.createElement(P,{style:o.author,onPress:()=>{const s=F(u);He(s.version,v(u,"ignored",null))}},"New version of AddonManager is available! Click here to update."))):t.createElement(t.Fragment,null),t.createElement(R,{title:"STORE"},t.createElement(r,{label:"Browse plugins",leading:t.createElement(De,{width:24,height:24}),trailing:r.Arrow,onPress:()=>{e?n(a,{pageName:"Plugins",pagePanel:()=>t.createElement(Be,{isSetting:!0,renderPage:n})}):a.navigate("Plugins")}}),t.createElement(r,{label:"Browse themes",leading:t.createElement(Oe,{width:24,height:24}),trailing:r.Arrow,onPress:()=>{e?n(a,{pageName:"Themes",pagePanel:()=>t.createElement(Fe,{isSetting:!0,renderPage:n})}):a.navigate("Themes")}}),t.createElement(r,{label:"Export addons",leading:t.createElement(r.Icon,{source:h.Export}),trailing:r.Arrow,onPress:()=>{e?n(a,{pageName:"Export",pagePanel:$e}):a.navigate("Export")}}),t.createElement(r,{label:"Import addons",leading:t.createElement(r.Icon,{source:h.Import}),trailing:r.Arrow,onPress:()=>{e?n(a,{pageName:"Import",pagePanel:je}):a.navigate("Import")}}),t.createElement(r,{label:"Update addons",leading:t.createElement(r.Icon,{source:h.Update}),trailing:r.Arrow,onPress:()=>{e?n(a,{pageName:"Update",pagePanel:()=>t.createElement(Ue,{isSetting:!0,renderPage:n})}):a.navigate("Update")}}),t.createElement(r,{label:"Settings",leading:t.createElement(r.Icon,{source:h.Settings}),trailing:r.Arrow,onPress:()=>{e?n(a,{pageName:"Settings",pagePanel:()=>t.createElement(Ye,{isSetting:!0,renderPage:n})}):a.navigate("Settings")}})),t.createElement(R,{title:"INFORMATION"},t.createElement(r,{label:"Follow me on Twitter",style:o.info,trailing:r.Arrow,leading:t.createElement(r.Icon,{source:h.Twitter}),onPress:()=>{z.openURL("https://twitter.com/m4fn3")}}),t.createElement(r,{label:"Visit my server for help",style:o.info,trailing:r.Arrow,leading:t.createElement(r.Icon,{source:h.Discord}),onPress:()=>{Ct.acceptInviteAndTransitionToInviteChannel({inviteKey:"TrCqPTCrdq",context:{location:"Invite Button Embed"},callback:()=>{a.pop()}})}}),t.createElement(r,{label:"Check Source on GitHub",style:o.info,trailing:r.Arrow,leading:t.createElement(r.Icon,{source:h.GitHub}),onPress:()=>{z.openURL("https://github.com/m4fn3/AddonManager")}})),t.createElement(P,{style:o.footer},`v${Me}`))}var Ve;(function(e){e[e.BuiltIn=0]="BuiltIn",e[e.Guild=1]="Guild",e[e.DM=2]="DM"})(Ve||(Ve={}));var Te;(function(e){e[e.Chat=1]="Chat",e[e.User=2]="User",e[e.Message=3]="Message"})(Te||(Te={}));var Ke;(function(e){e[e.BuiltIn=0]="BuiltIn",e[e.BuiltInText=1]="BuiltInText",e[e.BuiltInIntegration=2]="BuiltInIntegration",e[e.Bot=3]="Bot",e[e.Placeholder=4]="Placeholder"})(Ke||(Ke={}));var ze;(function(e){e[e.Role=1]="Role",e[e.User=2]="User"})(ze||(ze={}));var Xe;(function(e){e[e.SubCommand=1]="SubCommand",e[e.SubCommandGroup=2]="SubCommandGroup",e[e.String=3]="String",e[e.Integer=4]="Integer",e[e.Boolean=5]="Boolean",e[e.User=6]="User",e[e.Channel=7]="Channel",e[e.Role=8]="Role",e[e.Mentionnable=9]="Mentionnable",e[e.Number=10]="Number",e[e.Attachment=11]="Attachment"})(Xe||(Xe={}));var We;(function(e){e[e.ApplicationCommand=2]="ApplicationCommand",e[e.MessageComponent=3]="MessageComponent"})(We||(We={}));const Je=ue.createStackNavigator();var zt=({name:e="AddonManager",component:n=se}={})=>{const o=M.createThemedStyleSheet({container:{backgroundColor:g.ThemeColorMap.BACKGROUND_MOBILE_SECONDARY,flex:1},cardStyle:{backgroundColor:g.ThemeColorMap.BACKGROUND_MOBILE_PRIMARY,color:g.ThemeColorMap.TEXT_NORMAL},header:{backgroundColor:g.ThemeColorMap.BACKGROUND_MOBILE_SECONDARY,shadowColor:"transparent",elevation:0},headerText:{color:g.ThemeColorMap.HEADER_PRIMARY},headerButton:{color:g.ThemeColorMap.HEADER_PRIMARY}});return t.createElement(rt.NavigationContainer,{independent:!0},t.createElement(Je.Navigator,{initialRouteName:e,style:o.container,screenOptions:{cardOverlayEnabled:!1,cardShadowEnabled:!1,cardStyle:o.cardStyle,headerStyle:o.header,headerTitleAlign:"center",safeAreaInsets:{top:0}}},t.createElement(Je.Screen,{name:e,component:n,options:{headerTitleStyle:{color:"white"},headerLeft:()=>t.createElement(xt,{color:o.headerButton.color,title:"Close",onPress:()=>me.pop()}),...ue.TransitionPresets.ModalPresentationIOS}})))};function qe(e,n,o){return window.enmity.utilities.findInReactTree(e,n,o)}const[Xt,Wt,Jt,qt]=vt(ae.byName("MessagesConnected",!1),ae.byName("MessagesWrapperConnected",!1),ae.byProps("openPrivateChannel"),ae.byName("UserSettingsOverviewWrapper",!1)),{Platform:{isPad:Ze}}=G("View","Text");let Ce=!1;const Zt=S("ic_information_24px"),Qe="643945264868098049";function et(){A.open({content:"nvm. It is the normal behaviour on iPad as of now.",source:Zt}),Ce=!0,setTimeout(()=>{Jt.openPrivateChannel(Qe)},100)}const te=it("AddonManager"),tt={...mt,onStart(){const e={id:"addon",name:"addon",displayName:"addon",description:"Open AddonManager",displayDescription:"Open AddonManager",type:Te.Chat,execute:async function(a,s){Ze?et():me.push(zt,{component:Se,name:"AddonManager"})}};this.commands=[e];const n=te.after(qt,"default",(a,s,m)=>{const w=qe(m,E=>{var f;return((f=E.type)==null?void 0:f.name)==="UserSettingsOverview"});te.after(w.type.prototype,"render",({props:{navigation:E}},f,l)=>{const i=qe(l,p=>p.key==="Enmity");v(u,"add_to_settings",!0)&&i.props.children.push(t.createElement(Bt,null),t.createElement(r,{label:"AddonManager",leading:t.createElement(r.Icon,{source:h.SettingIcon}),trailing:t.createElement(Lt,null),onPress:()=>void E.push("AddonManager",{navigation:E})})),n()})});te.after(lt,"default",(a,s,m)=>({...m,AddonManager:{key:"AddonManager",title:"AddonManager",render:()=>t.createElement(Se,null)}}));const o=Xt||Wt;te.after(o,"default",(a,s,m)=>{var w,E;if(Ce&&((E=(w=s[0].channel)==null?void 0:w.recipients)==null?void 0:E.includes(Qe)))return t.createElement(Se,null);Ce=!1}),v(u,"check_updates_me",!0)&&(v(u,"_updating",!1)?y(u,"_updating",!1):ve()),["plugin","theme"].forEach(a=>At(a)),ft(),bt(),kt()},onStop(){te.unpatchAll()},renderPage(e,{pageName:n,pagePanel:o}){var a;return(a=e==null?void 0:e.push)==null?void 0:a.call(e,"EnmityCustomPage",{pageName:n,pagePanel:o})},getSettingsPanel({settings:e}){return Ze&&(me.pop(),et()),t.createElement(Ge,{settings:e,renderPage:tt.renderPage})}};ot(tt);
