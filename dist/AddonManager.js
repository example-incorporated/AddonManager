function je(e){window.enmity.plugins.registerPlugin(e)}function $(e){return window.enmity.plugins.getPlugin(e)}function Q(){return window.enmity.plugins.getPlugins()}const g=window.enmity.modules.common.Constants;window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets,window.enmity.modules.common.Messages,window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const t=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage;const N=window.enmity.modules.common.Toasts;window.enmity.modules.common.Dialog;const He=window.enmity.modules.common.Token,L=window.enmity.modules.common.REST;window.enmity.modules.common.Settings,window.enmity.modules.common.Users;const ee=window.enmity.modules.common.Navigation,Ge=window.enmity.modules.common.NavigationNative,le=window.enmity.modules.common.NavigationStack;window.enmity.modules.common.Theme;const te=window.enmity.modules.common.Linking,M=window.enmity.modules.common.StyleSheet,pe=window.enmity.modules.common.ColorMap;window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux;const O=window.enmity.modules.common.SVG;window.enmity.modules.common.Scenes,window.enmity.modules.common.Moment;function Ye(e){return window.enmity.patcher.create(e)}var fe;(function(e){e[e.BuiltIn=0]="BuiltIn",e[e.Guild=1]="Guild",e[e.DM=2]="DM"})(fe||(fe={}));var ie;(function(e){e[e.Chat=1]="Chat",e[e.User=2]="User",e[e.Message=3]="Message"})(ie||(ie={}));var ye;(function(e){e[e.BuiltIn=0]="BuiltIn",e[e.BuiltInText=1]="BuiltInText",e[e.BuiltInIntegration=2]="BuiltInIntegration",e[e.Bot=3]="Bot",e[e.Placeholder=4]="Placeholder"})(ye||(ye={}));var be;(function(e){e[e.Role=1]="Role",e[e.User=2]="User"})(be||(be={}));var Se;(function(e){e[e.SubCommand=1]="SubCommand",e[e.SubCommandGroup=2]="SubCommandGroup",e[e.String=3]="String",e[e.Integer=4]="Integer",e[e.Boolean=5]="Boolean",e[e.User=6]="User",e[e.Channel=7]="Channel",e[e.Role=8]="Role",e[e.Mentionnable=9]="Mentionnable",e[e.Number=10]="Number",e[e.Attachment=11]="Attachment"})(Se||(Se={}));var ve;(function(e){e[e.ApplicationCommand=2]="ApplicationCommand",e[e.MessageComponent=3]="MessageComponent"})(ve||(ve={}));const{components:c}=window.enmity;c.Alert;const Re=c.Button,Ve=c.FlatList,Te=c.Image;c.ImageBackground,c.KeyboardAvoidingView,c.Modal,c.Pressable,c.RefreshControl;const D=c.ScrollView;c.SectionList,c.StatusBar,c.StyleSheet,c.Switch;const P=c.Text,Ke=c.TextInput;c.TouchableHighlight;const ze=c.TouchableOpacity;c.TouchableWithoutFeedback,c.Touchable;const ce=c.View;c.VirtualizedList,c.Form,c.FormArrow,c.FormCTA,c.FormCTAButton,c.FormCardSection,c.FormCheckbox,c.FormDivider,c.FormHint,c.FormIcon,c.FormInput,c.FormLabel,c.FormRadio;const o=c.FormRow,A=c.FormSection;c.FormSelect,c.FormSubLabel;const _e=c.FormSwitch;c.FormTernaryCheckBox,c.FormText,c.FormTextColors,c.FormTextSizes;function R(e,n,r){window.enmity.settings.set(e,n,r)}function x(e,n,r){return window.enmity.settings.get(e,n,r)}var E="AddonManager",Ce="1.1.0",Xe="Manage plugins & themes easily!",We=[{name:"mafu",id:"519760564755365888"}],Je="#00ffff",qe={name:E,version:Ce,description:Xe,authors:We,color:Je};function _(e){return window.enmity.assets.getIDByName(e)}function z(...e){return window.enmity.modules.getByProps(...e)}function Ie(...e){return window.enmity.modules.getByName(...e)}function Ze(...e){return window.enmity.modules.getByKeyword(...e)}window.enmity.modules.common;const Qe=Ie("Icon"),X=Ze("getFocusedRoute"),Me=Ie("StaticSearchBarContainer"),et=z("acceptInviteAndTransitionToInviteChannel"),tt=z("AppState"),nt=z("DRMType","FilterType").default,Pe=z("setString"),m={Copy:_("ic_message_copy"),GitHub:_("img_account_sync_github_white"),Twitter:_("img_account_sync_twitter_white"),Discord:_("Discord"),Update:_("toast_image_saved"),Export:_("ic_reply_24px"),Import:_("ic_leave_stage"),Fail:_("Small"),Download:_("ic_download_24px"),Check:_("ic_check_24px"),Clear:_("ic_input_clear_24px"),Uninstall:_("ic_trash_24px")},W=M.createThemedStyleSheet({cardStyle:{backgroundColor:g.ThemeColorMap.BACKGROUND_MOBILE_PRIMARY,color:g.ThemeColorMap.TEXT_NORMAL},header:{backgroundColor:g.ThemeColorMap.BACKGROUND_MOBILE_SECONDARY,shadowColor:"transparent",elevation:0},headerText:{color:g.ThemeColorMap.HEADER_PRIMARY}}),ot={cardStyle:W.cardStyle,headerStyle:W.header,headerTitleContainerStyle:W.headerText,headerTitleStyle:W.headerText,headerBackTitleStyle:W.headerText,headerBackImage:()=>t.createElement(Qe,{source:_("ios-back")}),headerTitleAlign:"center",safeAreaInsets:{top:0}};function rt(e,n,r,a=186){let h=e.replace("#","");const d=(u,i,w)=>parseInt(u.substring(i[0],i[1]),w),v=d(h,[0,2],16),l=d(h,[2,4],16),b=d(h,[4,6],16);return(v+l+b)/(255*3)>a?r:n}function F(e,n,r=()=>{}){window.enmity.plugins.installPlugin(n,a=>{a.name===void 0?N.open({content:`Failed to install ${e}`,source:m.Fail}):(N.open({content:`Successfully installed ${e}!`,source:m.Check}),r())})}function se(e,n=()=>{}){window.enmity.plugins.uninstallPlugin(e,r=>{N.open({content:`Successfully uninstalled ${e}!`,source:m.Check}),n()})}function ne(e,n,r=()=>{}){window.enmity.themer.installTheme(n,a=>{N.open({content:`Successfully installed ${e}!`,source:m.Check}),r()})}function at(e,n=()=>{}){window.enmity.themer.uninstallTheme(e,r=>{N.open({content:`Successfully uninstalled ${e}!`,source:m.Check}),n()})}function U(e){return window.enmity.themer.getThemeByName(e)}function oe(){return window.enmity.themer.listThemes()}function lt(e){try{let n=U(window.enmity.themer.getTheme());return n?n.colours[e]:void 0}catch{return}}function re(e,n){let r=de("plugin");r.push(n),R(E,`_updated_${e}s`,JSON.stringify(r))}function it(e){R(E,`_updated_${e}s`,"[]")}function de(e){return JSON.parse(x(E,`_updated_${e}s`,"[]").toString())}const j="https://raw.githubusercontent.com/m4fn3/AddonManagerDatabase/master/",ct=j+"plugins.json",st=j+"themes.json",dt=j+"plugins_update.txt",mt=j+"themes_update.txt",ut=j+"compatibility.json";function H(e){return`${e}?${Date.now()}`}function ht(e,n){return`${j}${e}s/${n}.json`}function me(e){try{return JSON.parse(x(E,e,"{}").toString())}catch{return{}}}function G(){return me("plugins")}function J(){return me("themes")}function gt(){return me("compatibility")}function Ae(){L.get(H(ct)).then(e=>{R(E,"plugins",e.text)})}function Ne(){L.get(H(st)).then(e=>{R(E,"themes",e.text)})}function Et(){L.get(H(dt)).then(e=>{let n=e.text,r=x(E,"plugins_ver");r?r!=n&&(R(E,"plugins_ver",n),Ae()):(R(E,"plugins_ver",n),Ae())})}function wt(){L.get(H(mt)).then(e=>{let n=e.text,r=x(E,"themes_ver");r?r!=n&&(R(E,"themes_ver",n),Ne()):(R(E,"themes_ver",n),Ne())})}const xe=le.createStackNavigator(),{ThemeColorMap:Y}=pe;var pt=({name:e="AddonManager",component:n=ce,detail:r=null}={})=>{const a=M.createThemedStyleSheet({container:{backgroundColor:Y.BACKGROUND_MOBILE_SECONDARY,flex:1},cardStyle:{backgroundColor:Y.BACKGROUND_MOBILE_PRIMARY,color:Y.TEXT_NORMAL},header:{backgroundColor:Y.BACKGROUND_MOBILE_SECONDARY,shadowColor:"transparent",elevation:0},headerText:{color:Y.HEADER_PRIMARY},headerButton:{color:Y.HEADER_PRIMARY}});let h,d;return r&&(d=x(d,"_selected_plugin").toString(),h=$(d)),t.createElement(Ge.NavigationContainer,{independent:!0},t.createElement(xe.Navigator,{initialRouteName:e,style:a.container,screenOptions:{cardOverlayEnabled:!1,cardShadowEnabled:!1,cardStyle:a.cardStyle,headerStyle:a.header,headerTitleContainerStyle:a.headerTitleContainer,headerTitleAlign:"center",safeAreaInsets:{top:0}}},t.createElement(xe.Screen,{name:e,component:n,options:{headerTitleStyle:{color:"white"},headerLeft:()=>t.createElement(Re,{color:a.headerButton.color,title:"Close",onPress:()=>ee.pop()}),headerRight:()=>r?t.createElement(Re,{color:a.headerButton.color,title:h?"Uninstall":"Install",onPress:()=>{if(h)se(d,()=>ee.pop());else{const v=G();F(d,v[d].url,()=>ee.pop())}}}):t.createElement(t.Fragment,null),...le.TransitionPresets.ModalPresentationIOS}})))};const{ThemeColorMap:ke}=pe;function Be({height:e,width:n,...r}){const a=M.createThemedStyleSheet({icon:{color:ke.INTERACTIVE_NORMAL,opacity:.75,marginLeft:.5}});return t.createElement(O.Svg,{viewBox:"0 0 24 24",style:{height:e,width:n,...a.icon},fill:"currentColor",...r},t.createElement(O.Path,{d:"M0 0h24v24H0z",fill:"none"}),t.createElement(O.Path,{d:"M20.5 11H19V7c0-1.1-.9-2-2-2h-4V3.5C13 2.12 11.88 1 10.5 1S8 2.12 8 3.5V5H4c-1.1 0-1.99.9-1.99 2v3.8H3.5c1.49 0 2.7 1.21 2.7 2.7s-1.21 2.7-2.7 2.7H2V20c0 1.1.9 2 2 2h3.8v-1.5c0-1.49 1.21-2.7 2.7-2.7 1.49 0 2.7 1.21 2.7 2.7V22H17c1.1 0 2-.9 2-2v-4h1.5c1.38 0 2.5-1.12 2.5-2.5S21.88 11 20.5 11z"}))}function De({height:e,width:n,...r}){const a=M.createThemedStyleSheet({icon:{color:ke.INTERACTIVE_NORMAL,opacity:.75,marginLeft:.5}});return t.createElement(O.Svg,{viewBox:"0 0 24 24",style:{height:e,width:n,...a.icon},fill:"currentColor",...r},t.createElement(O.Path,{d:"M0 0h24v24H0z",fill:"none"}),t.createElement(O.Path,{d:"M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8zm-5.5 9c-.83 0-1.5-.67-1.5-1.5S5.67 9 6.5 9 8 9.67 8 10.5 7.33 12 6.5 12zm3-4C8.67 8 8 7.33 8 6.5S8.67 5 9.5 5s1.5.67 1.5 1.5S10.33 8 9.5 8zm5 0c-.83 0-1.5-.67-1.5-1.5S13.67 5 14.5 5s1.5.67 1.5 1.5S15.33 8 14.5 8zm3 4c-.83 0-1.5-.67-1.5-1.5S16.67 9 17.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"}))}function ft(){const e=M.createThemedStyleSheet({container:{flex:1,backgroundColor:g.ThemeColorMap.BACKGROUND_PRIMARY}}),n=X.useNavigation(),r=G(),[a,h]=t.useState(""),[d,v]=t.useState(Q().map(l=>l.name));return t.createElement(t.Fragment,null,t.createElement(Me,{placeholder:"Search plugins",onChangeText:l=>h(l)}),t.createElement(D,{style:e.container},Object.keys(r).sort().filter(l=>l.toLowerCase().includes(a.toLowerCase())).map(l=>t.createElement(o,{label:r[l].version?`${l} - v${r[l].version}`:l,subLabel:r[l].description,leading:d.includes(l)?t.createElement(o.Icon,{source:m.Uninstall}):t.createElement(o.Icon,{source:m.Download}),trailing:o.Arrow,onPress:()=>{R(E,"_selected_plugin",l),n.navigate("PluginDetail")},onLongPress:()=>{d.includes(l)?se(l,()=>{let b=Object.assign([],d);b.splice(b.indexOf(l),1),v(b)}):F(l,r[l].url,()=>{let b=Object.assign([],d);b.push(l),v(b)})}}))))}function yt(){const e=M.createThemedStyleSheet({container:{flex:1,backgroundColor:g.ThemeColorMap.BACKGROUND_PRIMARY}}),n=X.useNavigation(),r=J(),[a,h]=t.useState(""),[d,v]=t.useState(oe().map(l=>l.name));return t.createElement(t.Fragment,null,t.createElement(Me,{placeholder:"Search themes",onChangeText:l=>h(l)}),t.createElement(D,{style:e.container},Object.keys(r).sort().filter(l=>l.toLowerCase().includes(a.toLowerCase())).map(l=>t.createElement(o,{label:r[l].version?`${l} - v${r[l].version}`:l,subLabel:r[l].description,leading:d.includes(l)?t.createElement(o.Icon,{source:m.Uninstall}):t.createElement(o.Icon,{source:m.Download}),trailing:o.Arrow,onPress:()=>{R(E,"_selected_theme",l),n.navigate("ThemeDetail")}}))))}function bt(){let e=x(E,"check_updates");if(e===void 0)R(E,"check_updates",!1);else if(e){const n=G(),r=J();let a=he(n),h=ge(r);if(a.length||h.length){let d=a.concat(h).join(", ");N.open({content:`Updates are available for ${d}`,source:m.Download})}}}function ue(e,n){return n.localeCompare(e,void 0,{numeric:!0})}function $e(e,n){return ue(e,n)===1}function he(e){return Q().map(n=>n.name).filter(n=>Object.keys(e).includes(n)&&Object.keys(e[n]).includes("version")&&$(n).version&&$e($(n).version,e[n].version))}function ge(e){return oe().map(n=>n.name).filter(n=>Object.keys(e).includes(n)&&Object.keys(e[n]).includes("version")&&U(n).version&&$e(U(n).version,e[n].version))}function St(){const e=M.createThemedStyleSheet({container:{flex:1,backgroundColor:g.ThemeColorMap.BACKGROUND_PRIMARY}}),n=X.useNavigation(),r=X.useIsFocused(),a=G(),h=J(),d=he(a),v=ge(h);let[l,b]=t.useState(d.length?d:["@"]),[u,i]=t.useState(v.length?v:["@"]);const[w,k]=t.useState(Boolean(x(E,"check_updates")));return t.useEffect(()=>{let s=de("plugin"),S=Object.assign([],l.filter(K=>!s.includes(K)));b(S.length?S:["@"]);let p=de("theme"),V=Object.assign([],u.filter(K=>!p.includes(K)));i(V.length?V:["@"])},[r]),t.createElement(D,{style:e.container},t.createElement(A,{title:"UPDATE"},t.createElement(o,{label:"Check updates on startup",leading:t.createElement(o.Icon,{source:m.Update}),trailing:t.createElement(_e,{value:w,onValueChange:s=>{k(s),R(E,"check_updates",s)}})})),t.createElement(A,{title:"PLUGINS"},l.map(s=>s==="@"?t.createElement(o,{label:"No updates are found for plugins"}):t.createElement(o,{label:s&&`${s} - v${$(s).version} -> v${a[s].version}`,subLabel:a[s].description,leading:t.createElement(o.Icon,{source:m.Download}),trailing:o.Arrow,onPress:()=>{R(E,"_selected_plugin",s),n.navigate("PluginDetail")},onLongPress:()=>{F(s,a[s].url,()=>{re("plugin",s);let S=Object.assign([],l);S.splice(S.indexOf(s),1),b(S.length?S:["@"])})}}))),t.createElement(A,{title:"THEMES"},u.map(s=>s==="@"?t.createElement(o,{label:"No updates are found for themes"}):t.createElement(o,{label:s&&`${s} - v${U(s).version} -> v${h[s].version}`,subLabel:h[s].description,leading:t.createElement(o.Icon,{source:m.Download}),trailing:o.Arrow,onPress:()=>{R(E,"_selected_theme",s),n.navigate("ThemeDetail")},onLongPress:()=>{ne(s,h[s].url,()=>{re("theme",s);let S=Object.assign([],u);S.splice(S.indexOf(s),1),i(S.length?S:["@"])})}}))))}const vt=z("updateNote");async function Rt(e){let n=await(await fetch(`https://discord.com/api/v9/users/@me/notes/${e}`,{method:"GET",credentials:"include",headers:{authorization:He.getToken()}})).json();return Object.keys(n).includes("note")?n.note:""}function Tt(e,n){vt.updateNote(e,n)}function _t(){const e=M.createThemedStyleSheet({container:{flex:1,backgroundColor:g.ThemeColorMap.BACKGROUND_PRIMARY},importText:{color:"white",height:40,paddingLeft:15}}),n=G(),r=J(),[a,h]=t.useState({"":{}}),[d,v]=t.useState({"":{}});function l(i){const w=Q().map(p=>p.name),k=oe().map(p=>p.name);let s={},S={};i[0].split(";").filter(p=>Object.keys(n).includes(p)).forEach(p=>{s[p]=Object.assign(n[p],{installed:w.includes(p)})}),h(Object.keys(s).length?s:{"":{}}),i[1].split(";").filter(p=>Object.keys(r).includes(p)).forEach(p=>{S[p]=Object.assign(r[p],{installed:k.includes(p)})}),v(Object.keys(S).length?S:{"":{}})}function b(i,w=void 0){let k=i.split("|");if(k.length!=2){let s=w||"Invalid text format. Please make sure that you entered correct text.";return N.open({content:s,source:m.Fail}),!1}else return k}let u;return t.createElement(D,{style:e.container},t.createElement(A,{title:"IMPORT"},t.createElement(o,{style:e.importBackup,label:"Import from backup",subLabel:"Import installed addons from backup that linked to your discord account.",leading:t.createElement(o.Icon,{source:m.Import}),trailing:o.Arrow,onPress:()=>{Rt("1048982327809818706").then(i=>{let w=b(i,"No backup was found.");w&&(l(w),N.open({content:"Successfully imported addons from backup!",source:m.Check}))})}})),t.createElement(A,null,t.createElement(Ke,{style:e.importText,ref:i=>{u=i},placeholder:"Paste exported text",onSubmitEditing:i=>{let w=b(i.nativeEvent.text);w&&l(w)}}),t.createElement(o,{label:"Clear Input",trailing:o.Arrow,onPress:()=>{u.clear(),h({"":{}}),v({"":{}})}})),t.createElement(A,{title:"PLUGINS"},Object.keys(a).map(i=>a[i].url?t.createElement(o,{label:a[i].version?`${i} - v${a[i].version}`:i,subLabel:a[i].description,leading:a[i].installed?t.createElement(o.Icon,{source:m.Check}):t.createElement(o.Icon,{source:m.Download}),trailing:a[i].installed?void 0:o.Arrow,onPress:()=>{F(i,n[i].url,()=>{let w=Object.assign({},a);w[i].installed=!0,h(w)})}}):t.createElement(o,{label:"There are no imported plugins yet"}))),t.createElement(A,{title:"THEMES"},Object.keys(d).map(i=>d[i].url?t.createElement(o,{label:d[i].version?`${i} - v${d[i].version}`:i,subLabel:d[i].description,leading:d[i].installed?t.createElement(o.Icon,{source:m.Check}):t.createElement(o.Icon,{source:m.Download}),trailing:d[i].installed?void 0:o.Arrow,onPress:()=>{ne(i,r[i].url,()=>{let w=Object.assign({},d);w[i].installed=!0,v(w)})}}):t.createElement(o,{label:"There are no imported themes yet"}))))}function Le(){let e=Q().map(r=>r.name).join(";"),n=oe().map(r=>r.name).join(";");return`${e}|${n}`}function Ct(){const e=M.createThemedStyleSheet({container:{flex:1,backgroundColor:g.ThemeColorMap.BACKGROUND_PRIMARY}}),[n,r]=t.useState(Boolean(x(E,"auto_backup")));return t.createElement(D,{style:e.container},t.createElement(A,{title:"EXPORT"},t.createElement(o,{label:"Automatically create backup",subLabel:"Automatically save backup of installed addons. It will be linked with your discord account.",leading:t.createElement(o.Icon,{source:m.Export}),trailing:t.createElement(_e,{value:n,onValueChange:a=>{r(a),R(E,"auto_backup",a)}})})),t.createElement(A,{title:"ADVANCED"},t.createElement(o,{label:"Export addons as text",subLabel:"Export installed addons as text that you can import manually.",leading:t.createElement(o.Icon,{source:m.Copy}),trailing:o.Arrow,onPress:()=>{Pe.setString(Le()),N.open({content:"Copied addon list to clipboard!",source:m.Copy})}})))}const{native:ae}=window.enmity,Ee=ae.version;ae.build,ae.device,ae.version;function Oe({addonType:e}){let n=lt("PRIMARY_DARK_500"),r=n?rt(n,g.ThemeColorMap.TEXT_NORMAL[0],g.ThemeColorMap.TEXT_NORMAL[1]):g.ThemeColorMap.HEADER_PRIMARY;n=n||g.ThemeColorMap.BACKGROUND_SECONDARY;const a=M.createThemedStyleSheet({container:{flex:1,backgroundColor:g.ThemeColorMap.BACKGROUND_PRIMARY,padding:10},previews:{marginTop:20,justifyContent:"center"},addonName:{color:g.ThemeColorMap.TEXT_NORMAL,fontFamily:g.Fonts.PRIMARY_SEMIBOLD,fontSize:20},addonText:{borderBottomWidth:1,borderBottomColor:g.ThemeColorMap.HEADER_PRIMARY,paddingBottom:20},sectionTitle:{marginTop:20,marginLeft:15,color:g.ThemeColorMap.HEADER_PRIMARY},sectionContent:{margin:10,borderRadius:10,borderWidth:1,borderColor:g.ThemeColorMap.HEADER_PRIMARY,color:g.ThemeColorMap.TEXT_NORMAL,padding:10},addonEdit:{backgroundColor:n,paddingTop:10,paddingBottom:10,borderRadius:20,borderWidth:1,width:80,alignItems:"center",borderColor:n,overflow:"hidden"},addonEditText:{color:r,fontFamily:g.Fonts.PRIMARY_SEMIBOLD},hyperLink:{color:g.ThemeColorMap.TEXT_LINK}}),h=tt.useWindowDimensions().width,[d,v]=t.useState(["Loading description..."]),[l,b]=t.useState([]),u=x(E,`_selected_${e}`).toString(),i=e=="plugin"?G():J(),w=i[u];let k=e=="plugin"?he(i):ge(i),s=e=="plugin"?Boolean($(u)):Boolean(U(u)),S=k.includes(u);const[p,V]=t.useState(S),[K,Z]=t.useState(s?p?"UPDATE":"REMOVE":"GET"),[we,Ue]=t.useState(void 0);return t.useEffect(()=>{L.get(H(ht(e,u))).then(y=>{let T=JSON.parse(y.text),C=T.description.replace(/(\bhttps?:\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*)/ig,"<l>$1<l>").split("<l>");v(C);let B=Object.assign(T.images.map(I=>({url:I,width:1,height:1,type:"image"})),T.videos.map(I=>({url:I,width:null,height:null,type:"video"})));b(B)}).catch(y=>{y.status===404&&v(["No description."])});const f=gt();if(u in f[e]){let y=f[e][u].ver.split("~"),T=y[0]?y[0]:"0.0",C=y[1]?y[1]:"999.0";ue(T,Ee)>=0&&ue(Ee,C)>=0||Ue(f[e][u].text+`

Compatibility: ${f[e][u].ver} ( currently on ${Ee})`)}},[]),t.createElement(D,{style:a.container},t.createElement(o,{style:a.addonText,label:()=>t.createElement(P,{style:a.addonName},u),leading:e=="plugin"?t.createElement(Be,{width:32,height:32}):t.createElement(De,{width:32,height:32}),trailing:t.createElement(ze,{style:a.addonEdit,onPress:()=>{e=="plugin"?$(u)&&!p?se(u,()=>Z("GET")):F(u,w.url,()=>{V(!1),re(e,u),Z("REMOVE")}):U(u)&&!p?at(u,()=>Z("GET")):ne(u,w.url,()=>{V(!1),re(e,u),Z("REMOVE")})}},t.createElement(P,{style:a.addonEditText},K)),subLabel:w.description}),[1].filter(f=>Boolean(we)).map(f=>t.createElement(t.Fragment,null,t.createElement(P,{style:[a.sectionTitle,{color:"#e74c3c",fontFamily:g.Fonts.PRIMARY_SEMIBOLD}]},"Notice"),t.createElement(P,{style:[a.sectionContent,{borderColor:"#e74c3c"}]},we))),t.createElement(Ve,{horizontal:!0,data:l,style:a.previews,renderItem:({index:f,item:y})=>{if(y.type=="image")return t.createElement(Te,{style:{width:y.width,height:y.height,margin:5},source:{uri:y.url},onLoad:({nativeEvent:{source:{width:T,height:C}}})=>{let B=T/C;T=B<1?h*2/5:h*2/3,C=T/B;let I=Object.assign([],l);I[f].width=T,I[f].height=C,b(I)}});if(y.type=="video")return t.createElement(nt,{style:{width:y.width,height:y.height},source:{uri:y.url},controls:!0,paused:!0,onLoad:({naturalSize:{width:T,height:C}})=>{let B=T/C;T=B<1?h*2/5:h*2/3,C=T/B;let I=Object.assign([],l);I[f].width=T,I[f].height=C,b(I)}})},showsHorizontalScrollIndicator:!0}),t.createElement(P,{style:a.sectionTitle},"Description"),t.createElement(P,{style:a.sectionContent},d.map(f=>f.startsWith("http")?t.createElement(P,{style:a.hyperLink,onPress:()=>{let y=e=="plugin"?".js":".json";f.endsWith(y)?e=="plugin"?F(u,f):ne(u,f):te.openURL(f)},onLongPress:()=>{Pe.setString(f),N.open({content:"Copied URL to clipboard",source:m.Copy})}},f):t.createElement(P,null,f))))}const q=le.createStackNavigator();function Fe(){return t.createElement(q.Navigator,{initialRouteName:"Home",headerMode:"screen",screenOptions:{...ot}},t.createElement(q.Screen,{name:"Home",component:It,options:{headerShown:!1}}),[[ft,"Plugins"],[yt,"Themes"],[Ct,"Export"],[_t,"Import"],[St,"Update"]].map(([e,n])=>t.createElement(q.Screen,{name:n,component:e})),t.createElement(q.Screen,{name:"PluginDetail",component:()=>t.createElement(Oe,{addonType:"plugin"}),options:{title:""}}),t.createElement(q.Screen,{name:"ThemeDetail",component:()=>t.createElement(Oe,{addonType:"theme"}),options:{title:""}}))}function It(){const e=M.createThemedStyleSheet({container:{backgroundColor:g.ThemeColorMap.BACKGROUND_PRIMARY},header:{flexDirection:"row",justifyContent:"center",alignItems:"center"},image:{width:70,height:70,marginTop:20,marginLeft:20},title:{flexDirection:"column"},name:{fontSize:30,paddingTop:20,paddingLeft:20,paddingRight:30,color:g.ThemeColorMap.HEADER_PRIMARY},author:{fontSize:15,paddingLeft:50,color:g.ThemeColorMap.HEADER_SECONDARY},info:{height:45,paddingTop:3,paddingBottom:3,justifyContent:"center",alignItems:"center"},footer:{color:g.ThemeColorMap.HEADER_SECONDARY,textAlign:"center",paddingTop:10,paddingBottom:20}}),n=X.useNavigation();return t.useEffect(()=>{L.get(H(ut)).then(r=>{R(E,"compatibility",r.text)})},[]),t.createElement(D,{style:e.container},t.createElement(ce,{style:e.header},t.createElement(Te,{source:{uri:"https://avatars.githubusercontent.com/u/43488869"},style:e.image}),t.createElement(ce,{style:e.title},t.createElement(P,{style:e.name},"AddonManager"),t.createElement(P,{style:e.author},"by mafu"))),t.createElement(A,{title:"STORE"},t.createElement(o,{label:"Browse plugins",leading:t.createElement(Be,{width:24,height:24}),trailing:o.Arrow,onPress:()=>{n.navigate("Plugins")}}),t.createElement(o,{label:"Browse themes",leading:t.createElement(De,{width:24,height:24}),trailing:o.Arrow,onPress:()=>{n.navigate("Themes")}}),t.createElement(o,{label:"Export addons",leading:t.createElement(o.Icon,{source:m.Export}),trailing:o.Arrow,onPress:()=>{n.navigate("Export")}}),t.createElement(o,{label:"Import addons",leading:t.createElement(o.Icon,{source:m.Import}),trailing:o.Arrow,onPress:()=>{n.navigate("Import")}}),t.createElement(o,{label:"Update addons",leading:t.createElement(o.Icon,{source:m.Update}),trailing:o.Arrow,onPress:()=>{n.navigate("Update")}})),t.createElement(A,{title:"INFORMATION"},t.createElement(o,{label:"Follow me on Twitter",style:e.info,trailing:o.Arrow,leading:t.createElement(o.Icon,{source:m.Twitter}),onPress:()=>{te.openURL("https://twitter.com/m4fn3")}}),t.createElement(o,{label:"Visit my server for help",style:e.info,trailing:o.Arrow,leading:t.createElement(o.Icon,{source:m.Discord}),onPress:()=>{et.acceptInviteAndTransitionToInviteChannel({inviteKey:"TrCqPTCrdq",context:{location:"Invite Button Embed"},callback:()=>{n.pop()}})}}),t.createElement(o,{label:"Check Source on GitHub",style:e.info,trailing:o.Arrow,leading:t.createElement(o.Icon,{source:m.GitHub}),onPress:()=>{te.openURL("https://github.com/m4fn3/AddonManager")}})),t.createElement(P,{style:e.footer},`v${Ce}`))}const Mt={id:"addon",name:"addon",displayName:"addon",description:"Open AddonManager",displayDescription:"Open AddonManager",type:ie.Chat,execute:async function(e,n){ee.push(pt,{component:Fe,name:"AddonManager"})}};te.addEventListener("url",e=>{let n=e.url;n=decodeURIComponent(n.replace("com.hammerandchisel.discord://",""));try{const r=JSON.parse(n);x(E,"auto_backup")&&typeof r.data=="string"&&["installed_theme","overridden_theme","installed_plugin","overridden_plugin"].includes(r.data)&&Tt("1048982327809818706",Le())}catch{return}});const Pt=Ye("AddonManager"),At={...qe,onStart(){this.commands=[Mt],["plugin","theme"].forEach(e=>it(e)),Et(),wt(),bt()},onStop(){Pt.unpatchAll()},getSettingsPanel({settings:e}){return t.createElement(Fe,null)}};je(At);
