function tt(e){window.enmity.plugins.registerPlugin(e)}function k(e){return window.enmity.plugins.getPlugin(e)}function ne(){return window.enmity.plugins.getPlugins()}const u=window.enmity.modules.common.Constants;window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets,window.enmity.modules.common.Messages,window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const t=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage;const N=window.enmity.modules.common.Toasts,oe=window.enmity.modules.common.Dialog,nt=window.enmity.modules.common.Token,D=window.enmity.modules.common.REST;window.enmity.modules.common.Settings,window.enmity.modules.common.Users;const X=window.enmity.modules.common.Navigation,ot=window.enmity.modules.common.NavigationNative,ce=window.enmity.modules.common.NavigationStack;window.enmity.modules.common.Theme;const J=window.enmity.modules.common.Linking,P=window.enmity.modules.common.StyleSheet;window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux;const j=window.enmity.modules.common.SVG;window.enmity.modules.common.Scenes,window.enmity.modules.common.Moment;function rt(e){return window.enmity.patcher.create(e)}var g="AddonManager",Se="1.1.4",at="Manage plugins & themes easily!",lt=[{name:"mafu",id:"519760564755365888"}],it="#00ffff",st={name:g,version:Se,description:at,authors:lt,color:it};function E(e,n,o){window.enmity.settings.set(e,n,o)}function T(e,n,o){return window.enmity.settings.get(e,n,o)}const H="https://raw.githubusercontent.com/m4fn3/AddonManagerDatabase/master/",ct=H+"plugins.json",dt=H+"themes.json",mt=H+"plugins_update.txt",ut=H+"themes_update.txt",gt=H+"compatibility.json";function G(e){return`${e}?${Date.now()}`}function ht(e,n){return`${H}${e}s/${n}.json`}function de(e){try{return JSON.parse(T(g,e,"{}").toString())}catch{return{}}}function Y(){return de("plugins")}function q(){return de("themes")}function pt(){return de("compatibility")}function Te(){D.get(G(ct)).then(e=>{E(g,"plugins",e.text)})}function Ce(){D.get(G(dt)).then(e=>{E(g,"themes",e.text)})}function wt(){D.get(G(mt)).then(e=>{let n=e.text,o=T(g,"plugins_ver");o?o!=n&&(E(g,"plugins_ver",n),Te()):(E(g,"plugins_ver",n),Te())})}function Et(){D.get(G(ut)).then(e=>{let n=e.text,o=T(g,"themes_ver");o?o!=n&&(E(g,"themes_ver",n),Ce()):(E(g,"themes_ver",n),Ce())})}function C(e){return window.enmity.assets.getIDByName(e)}const me={byProps:(...e)=>window.enmity.modules.filters.byProps(...e),byName:(e,n)=>window.enmity.modules.filters.byName(e,n),byTypeName:(e,n)=>window.enmity.modules.filters.byTypeName(e,n),byDisplayName:(e,n)=>window.enmity.modules.filters.byDisplayName(e,n)};function yt(...e){return window.enmity.modules.bulk(...e)}function V(...e){return window.enmity.modules.getByProps(...e)}function ue(...e){return window.enmity.modules.getByName(...e)}function ft(...e){return window.enmity.modules.getByKeyword(...e)}window.enmity.modules.common;const bt=ue("Icon"),Z=ft("getFocusedRoute"),Me=ue("StaticSearchBarContainer"),vt=V("acceptInviteAndTransitionToInviteChannel"),St=V("AppState"),Tt=V("DRMType","FilterType").default,Pe=V("setString"),h={Copy:C("ic_message_copy"),GitHub:C("img_account_sync_github_white"),Twitter:C("img_account_sync_twitter_white"),Discord:C("Discord"),Update:C("toast_image_saved"),Export:C("ic_reply_24px"),Import:C("ic_leave_stage"),Fail:C("Small"),Download:C("ic_download_24px"),Check:C("ic_check_24px"),Clear:C("ic_input_clear_24px"),Uninstall:C("ic_trash_24px")},Q=P.createThemedStyleSheet({cardStyle:{backgroundColor:u.ThemeColorMap.BACKGROUND_MOBILE_PRIMARY,color:u.ThemeColorMap.TEXT_NORMAL},header:{backgroundColor:u.ThemeColorMap.BACKGROUND_MOBILE_SECONDARY,shadowColor:"transparent",elevation:0},headerText:{color:u.ThemeColorMap.HEADER_PRIMARY}}),Ct={cardStyle:Q.cardStyle,headerStyle:Q.header,headerTitleContainerStyle:Q.headerText,headerTitleStyle:Q.headerText,headerBackTitleStyle:Q.headerText,headerBackImage:()=>t.createElement(bt,{source:C("ios-back")}),headerTitleAlign:"center",safeAreaInsets:{top:0}};function Mt(e,n,o,r=186){let s=e.replace("#","");const m=(a,i,w)=>parseInt(a.substring(i[0],i[1]),w),p=m(s,[0,2],16),y=m(s,[2,4],16),b=m(s,[4,6],16);return(p+y+b)/(255*3)>r?o:n}function K(e,n,o=()=>{}){window.enmity.plugins.installPlugin(n,r=>{r.name===void 0?N.open({content:`Failed to install ${e}`,source:h.Fail}):(N.open({content:`Successfully installed ${e}!`,source:h.Check}),o())})}function ge(e,n=()=>{}){window.enmity.plugins.uninstallPlugin(e,o=>{N.open({content:`Successfully uninstalled ${e}!`,source:h.Check}),n()})}function re(e,n,o=()=>{}){window.enmity.themer.installTheme(n,r=>{N.open({content:`Successfully installed ${e}!`,source:h.Check}),o()})}function Pt(e,n=()=>{}){window.enmity.themer.uninstallTheme(e,o=>{N.open({content:`Successfully uninstalled ${e}!`,source:h.Check}),n()})}function z(e){return window.enmity.themer.getThemeByName(e)}function ae(){return window.enmity.themer.listThemes()}function Rt(e){try{let n=z(window.enmity.themer.getTheme());return n?n.colours[e]:void 0}catch{return}}function le(e,n){let o=he("plugin");o.push(n),E(g,`_updated_${e}s`,JSON.stringify(o))}function _t(e){E(g,`_updated_${e}s`,"[]")}function he(e){return JSON.parse(T(g,`_updated_${e}s`,"[]").toString())}function It(){let e=T(g,"check_updates");if(e===void 0)E(g,"check_updates",!1);else if(e){const n=Y(),o=q();let r=we(n),s=Ee(o);if(r.length||s.length){let m=r.concat(s).join(", ");N.open({content:`Updates are available for ${m}`,source:h.Download})}}}function pe(e,n){return n.localeCompare(e,void 0,{numeric:!0})}function Re(e,n){return pe(e,n)===1}function we(e){return ne().map(n=>n.name).filter(n=>Object.keys(e).includes(n)&&Object.keys(e[n]).includes("version")&&k(n).version&&Re(k(n).version,e[n].version))}function Ee(e){return ae().map(n=>n.name).filter(n=>Object.keys(e).includes(n)&&Object.keys(e[n]).includes("version")&&z(n).version&&Re(z(n).version,e[n].version))}const{components:d}=window.enmity;d.Alert;const _e=d.Button,Nt=d.FlatList,Ie=d.Image;d.ImageBackground,d.KeyboardAvoidingView,d.Modal,d.Pressable,d.RefreshControl;const F=d.ScrollView;d.SectionList,d.StatusBar,d.StyleSheet,d.Switch;const R=d.Text,xt=d.TextInput;d.TouchableHighlight;const At=d.TouchableOpacity;d.TouchableWithoutFeedback,d.Touchable;const ie=d.View;d.VirtualizedList,d.Form,d.FormArrow,d.FormCTA,d.FormCTAButton,d.FormCardSection,d.FormCheckbox,d.FormDivider,d.FormHint,d.FormIcon,d.FormInput,d.FormLabel,d.FormRadio;const l=d.FormRow,x=d.FormSection;d.FormSelect,d.FormSubLabel;const Ne=d.FormSwitch;d.FormTernaryCheckBox,d.FormText,d.FormTextColors,d.FormTextSizes;const $t=V("updateNote");async function kt(e){let n=await(await fetch(`https://discord.com/api/v9/users/@me/notes/${e}`,{method:"GET",credentials:"include",headers:{authorization:nt.getToken()}})).json();return Object.keys(n).includes("note")?n.note:""}function xe(e,n){$t.updateNote(e,n)}function ye(){let e=ne().map(o=>o.name).join(";"),n=ae().map(o=>o.name).join(";");return`${e}|${n}`}function Ae(){const e=P.createThemedStyleSheet({container:{flex:1,backgroundColor:u.ThemeColorMap.BACKGROUND_PRIMARY}}),[n,o]=t.useState(Boolean(T(g,"auto_backup")));return t.createElement(F,{style:e.container},t.createElement(x,{title:"EXPORT"},t.createElement(l,{label:"Automatically create backup",subLabel:"Automatically save backup of installed addons. It will be linked with your discord account.",leading:t.createElement(l.Icon,{source:h.Export}),trailing:t.createElement(Ne,{value:n,onValueChange:r=>{o(r),r&&xe("1048982327809818706",ye()),E(g,"auto_backup",r)}})})),t.createElement(x,{title:"ADVANCED"},t.createElement(l,{label:"Export addons as text",subLabel:"Export installed addons as text that you can import manually.",leading:t.createElement(l.Icon,{source:h.Copy}),trailing:l.Arrow,onPress:()=>{Pe.setString(ye()),N.open({content:"Copied addon list to clipboard!",source:h.Copy})}})))}J.addEventListener("url",e=>{let n=e.url;n=decodeURIComponent(n.replace("com.hammerandchisel.discord://",""));try{const o=JSON.parse(n);T(g,"auto_backup")&&typeof o.data=="string"&&["installed_theme","overridden_theme","installed_plugin","overridden_plugin"].includes(o.data)&&xe("1048982327809818706",ye())}catch{return}});function $e({height:e,width:n,...o}){const r=P.createThemedStyleSheet({icon:{color:u.ThemeColorMap.INTERACTIVE_NORMAL,opacity:.75,marginLeft:.5}});return t.createElement(j.Svg,{viewBox:"0 0 24 24",style:{height:e,width:n,...r.icon},fill:"currentColor",...o},t.createElement(j.Path,{d:"M0 0h24v24H0z",fill:"none"}),t.createElement(j.Path,{d:"M20.5 11H19V7c0-1.1-.9-2-2-2h-4V3.5C13 2.12 11.88 1 10.5 1S8 2.12 8 3.5V5H4c-1.1 0-1.99.9-1.99 2v3.8H3.5c1.49 0 2.7 1.21 2.7 2.7s-1.21 2.7-2.7 2.7H2V20c0 1.1.9 2 2 2h3.8v-1.5c0-1.49 1.21-2.7 2.7-2.7 1.49 0 2.7 1.21 2.7 2.7V22H17c1.1 0 2-.9 2-2v-4h1.5c1.38 0 2.5-1.12 2.5-2.5S21.88 11 20.5 11z"}))}function ke({height:e,width:n,...o}){const r=P.createThemedStyleSheet({icon:{color:u.ThemeColorMap.INTERACTIVE_NORMAL,opacity:.75,marginLeft:.5}});return t.createElement(j.Svg,{viewBox:"0 0 24 24",style:{height:e,width:n,...r.icon},fill:"currentColor",...o},t.createElement(j.Path,{d:"M0 0h24v24H0z",fill:"none"}),t.createElement(j.Path,{d:"M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8zm-5.5 9c-.83 0-1.5-.67-1.5-1.5S5.67 9 6.5 9 8 9.67 8 10.5 7.33 12 6.5 12zm3-4C8.67 8 8 7.33 8 6.5S8.67 5 9.5 5s1.5.67 1.5 1.5S10.33 8 9.5 8zm5 0c-.83 0-1.5-.67-1.5-1.5S13.67 5 14.5 5s1.5.67 1.5 1.5S15.33 8 14.5 8zm3 4c-.83 0-1.5-.67-1.5-1.5S16.67 9 17.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"}))}const{native:ee}=window.enmity;function Dt(){ee.reload()}const fe=ee.version;ee.build,ee.device,ee.version;var De=({content:e,addonType:n,addonName:o})=>{const r=P.createThemedStyleSheet({hyperLink:{color:u.ThemeColorMap.TEXT_LINK}});return e.replace(/(\bhttps?:\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*)/ig,"<l>$1<l>").split("<l>").map(s=>s.startsWith("http")?t.createElement(R,{style:r.hyperLink,onPress:()=>{let m=n=="plugin"?".js":".json";s.endsWith(m)?n=="plugin"?K(o,s):re(o,s):J.openURL(s)},onLongPress:()=>{Pe.setString(s),N.open({content:"Copied URL to clipboard",source:h.Copy})}},s):t.createElement(R,null,s))};function W({addonType:e}){let n=Rt("PRIMARY_DARK_500"),o=n?Mt(n,u.ThemeColorMap.TEXT_NORMAL[0],u.ThemeColorMap.TEXT_NORMAL[1]):u.ThemeColorMap.HEADER_PRIMARY;n=n||u.ThemeColorMap.BACKGROUND_SECONDARY;const r=P.createThemedStyleSheet({container:{flex:1,backgroundColor:u.ThemeColorMap.BACKGROUND_PRIMARY,padding:10},previews:{marginTop:20,justifyContent:"center"},addonName:{color:u.ThemeColorMap.TEXT_NORMAL,fontFamily:u.Fonts.PRIMARY_SEMIBOLD,fontSize:20},addonText:{borderBottomWidth:1,borderBottomColor:u.ThemeColorMap.HEADER_PRIMARY,paddingBottom:20},sectionTitle:{marginTop:20,marginLeft:15,color:u.ThemeColorMap.HEADER_PRIMARY},sectionContent:{margin:10,borderRadius:10,borderWidth:1,borderColor:u.ThemeColorMap.HEADER_PRIMARY,color:u.ThemeColorMap.TEXT_NORMAL,padding:10},addonEdit:{backgroundColor:n,paddingTop:10,paddingBottom:10,borderRadius:20,borderWidth:1,width:80,alignItems:"center",borderColor:n,overflow:"hidden"},addonEditText:{color:o,fontFamily:u.Fonts.PRIMARY_SEMIBOLD},hyperLink:{color:u.ThemeColorMap.TEXT_LINK}}),s=St.useWindowDimensions().width,[m,p]=t.useState("Loading description..."),[y,b]=t.useState([]),a=T(g,`_selected_${e}`).toString(),i=e=="plugin"?Y():q(),w=i[a];let A=e=="plugin"?we(i):Ee(i),$=e=="plugin"?Boolean(k(a)):Boolean(z(a)),L=A.includes(a);const[c,v]=t.useState(L),[se,B]=t.useState($?c?"UPDATE":"REMOVE":"GET"),[U,et]=t.useState(void 0);return t.useEffect(()=>{D.get(G(ht(e,a))).then(S=>{let f=JSON.parse(S.text);p(f.description);let _=Object.assign(f.images.map(I=>({url:I,width:1,height:1,type:"image"})),f.videos.map(I=>({url:I,width:null,height:null,type:"video"})));b(_)}).catch(S=>{S.status===404&&p("No description.")});const M=pt();if(a in M[e]){let S=!0;if(M[e][a].ver.includes("~")){let f=M[e][a].ver.split("~"),_=f[0]?f[0]:"0.0",I=f[1]?f[1]:"999.0";pe(_,fe)>=0&&pe(fe,I)>=0&&(S=!1)}S&&et(M[e][a].text+`

Compatibility: ${M[e][a].ver} (currently on ${fe})`)}},[]),t.createElement(F,{style:r.container},t.createElement(l,{style:r.addonText,label:()=>t.createElement(R,{style:r.addonName},a),leading:e=="plugin"?t.createElement($e,{width:32,height:32}):t.createElement(ke,{width:32,height:32}),trailing:t.createElement(At,{style:r.addonEdit,onPress:()=>{e=="plugin"?k(a)&&!c?ge(a,()=>B("GET")):K(a,w.url,()=>{v(!1),le(e,a),B("REMOVE")}):z(a)&&!c?Pt(a,()=>B("GET")):re(a,w.url,()=>{v(!1),le(e,a),B("REMOVE")})}},t.createElement(R,{style:r.addonEditText},se)),subLabel:w.description}),[1].filter(M=>Boolean(U)).map(M=>t.createElement(t.Fragment,null,t.createElement(R,{style:[r.sectionTitle,{color:"#e74c3c",fontFamily:u.Fonts.PRIMARY_SEMIBOLD}]},"Notice"),t.createElement(R,{style:[r.sectionContent,{borderColor:"#e74c3c"}]},t.createElement(De,{content:U,addonType:e,addonName:a})))),t.createElement(Nt,{horizontal:!0,data:y,style:r.previews,renderItem:({index:M,item:S})=>{if(S.type=="image")return t.createElement(Ie,{style:{width:S.width,height:S.height,margin:5},source:{uri:S.url},onLoad:({nativeEvent:{source:{width:f,height:_}}})=>{let I=f/_;f=I<1?s*2/5:s*2/3,_=f/I;let O=Object.assign([],y);O[M].width=f,O[M].height=_,b(O)}});if(S.type=="video")return t.createElement(Tt,{style:{width:S.width,height:S.height},source:{uri:S.url},controls:!0,paused:!0,onLoad:({naturalSize:{width:f,height:_}})=>{let I=f/_;f=I<1?s*2/5:s*2/3,_=f/I;let O=Object.assign([],y);O[M].width=f,O[M].height=_,b(O)}})},showsHorizontalScrollIndicator:!0}),t.createElement(R,{style:r.sectionTitle},"Description"),t.createElement(R,{style:r.sectionContent},t.createElement(De,{content:m,addonType:e,addonName:a})))}function Le({isSetting:e=!1,renderPage:n=null}){const o=P.createThemedStyleSheet({container:{flex:1,backgroundColor:u.ThemeColorMap.BACKGROUND_PRIMARY}}),r=Z.useNavigation(),s=Y(),[m,p]=t.useState(""),[y,b]=t.useState(ne().map(a=>a.name));return t.createElement(t.Fragment,null,t.createElement(Me,{placeholder:"Search plugins",onChangeText:a=>p(a)}),t.createElement(F,{style:o.container},Object.keys(s).sort().filter(a=>a.toLowerCase().includes(m.toLowerCase())).map(a=>t.createElement(l,{label:s[a].version?`${a} - v${s[a].version}`:a,subLabel:s[a].description,leading:y.includes(a)?t.createElement(l.Icon,{source:h.Uninstall}):t.createElement(l.Icon,{source:h.Download}),trailing:l.Arrow,onPress:()=>{E(g,"_selected_plugin",a),e?n(r,{pageName:" ",pagePanel:()=>t.createElement(W,{addonType:"plugin"})}):r.navigate("PluginDetail")},onLongPress:()=>{y.includes(a)?ge(a,()=>{let i=Object.assign([],y);i.splice(i.indexOf(a),1),b(i)}):K(a,s[a].url,()=>{let i=Object.assign([],y);i.push(a),b(i)})}}))))}function Be({isSetting:e=!1,renderPage:n=null}){const o=P.createThemedStyleSheet({container:{flex:1,backgroundColor:u.ThemeColorMap.BACKGROUND_PRIMARY}}),r=Z.useNavigation(),s=q(),[m,p]=t.useState(""),[y,b]=t.useState(ae().map(a=>a.name));return t.createElement(t.Fragment,null,t.createElement(Me,{placeholder:"Search themes",onChangeText:a=>p(a)}),t.createElement(F,{style:o.container},Object.keys(s).sort().filter(a=>a.toLowerCase().includes(m.toLowerCase())).map(a=>t.createElement(l,{label:s[a].version?`${a} - v${s[a].version}`:a,subLabel:s[a].description,leading:y.includes(a)?t.createElement(l.Icon,{source:h.Uninstall}):t.createElement(l.Icon,{source:h.Download}),trailing:l.Arrow,onPress:()=>{E(g,"_selected_theme",a),e?n(r,{pageName:" ",pagePanel:()=>t.createElement(W,{addonType:"theme"})}):r.navigate("ThemeDetail")}}))))}function Oe({isSetting:e=!1,renderPage:n=null}){const o=P.createThemedStyleSheet({container:{flex:1,backgroundColor:u.ThemeColorMap.BACKGROUND_PRIMARY}}),r=Z.useNavigation(),s=Z.useIsFocused(),m=Y(),p=q(),y=we(m),b=Ee(p);let[a,i]=t.useState(y.length?y:["@"]),[w,A]=t.useState(b.length?b:["@"]);const[$,L]=t.useState(Boolean(T(g,"check_updates",!0)));return t.useEffect(()=>{let c=he("plugin"),v=Object.assign([],a.filter(U=>!c.includes(U)));i(v.length?v:["@"]);let se=he("theme"),B=Object.assign([],w.filter(U=>!se.includes(U)));A(B.length?B:["@"])},[s]),t.createElement(F,{style:o.container},t.createElement(x,{title:"UPDATE"},t.createElement(l,{label:"Check updates on startup",leading:t.createElement(l.Icon,{source:h.Update}),trailing:t.createElement(Ne,{value:$,onValueChange:c=>{L(c),E(g,"check_updates",c)}})})),t.createElement(x,{title:"PLUGINS"},a.map(c=>c==="@"?t.createElement(l,{label:"No updates are found for plugins"}):t.createElement(l,{label:c&&`${c} - v${k(c).version} -> v${m[c].version}`,subLabel:m[c].description,leading:t.createElement(l.Icon,{source:h.Download}),trailing:l.Arrow,onPress:()=>{E(g,"_selected_plugin",c),e?n(r,{pageName:" ",pagePanel:()=>t.createElement(W,{addonType:"plugin"})}):r.navigate("PluginDetail")},onLongPress:()=>{K(c,m[c].url,()=>{le("plugin",c);let v=Object.assign([],a);v.splice(v.indexOf(c),1),i(v.length?v:["@"])})}}))),t.createElement(x,{title:"THEMES"},w.map(c=>c==="@"?t.createElement(l,{label:"No updates are found for themes"}):t.createElement(l,{label:c&&`${c} - v${z(c).version} -> v${p[c].version}`,subLabel:p[c].description,leading:t.createElement(l.Icon,{source:h.Download}),trailing:l.Arrow,onPress:()=>{E(g,"_selected_theme",c),e?n(r,{pageName:" ",pagePanel:()=>t.createElement(W,{addonType:"theme"})}):r.navigate("ThemeDetail")},onLongPress:()=>{re(c,p[c].url,()=>{le("theme",c);let v=Object.assign([],w);v.splice(v.indexOf(c),1),A(v.length?v:["@"])})}}))))}function Fe(){const e=P.createThemedStyleSheet({container:{flex:1,backgroundColor:u.ThemeColorMap.BACKGROUND_PRIMARY},importText:{color:"white",height:40,paddingLeft:15}}),n=Y(),o=q(),[r,s]=t.useState({"":{}}),[m,p]=t.useState({"":{}});function y(i){const w=ne().map(c=>c.name),A=ae().map(c=>c.name);let $={},L={};i[0].split(";").filter(c=>Object.keys(n).includes(c)).forEach(c=>{$[c]=Object.assign(n[c],{installed:w.includes(c)})}),s(Object.keys($).length?$:{"":{}}),i[1].split(";").filter(c=>Object.keys(o).includes(c)).forEach(c=>{L[c]=Object.assign(o[c],{installed:A.includes(c)})}),p(Object.keys(L).length?L:{"":{}})}function b(i,w=void 0){let A=i.split("|");if(A.length!=2){let $=w||"Invalid text format. Please make sure that you entered correct text.";return N.open({content:$,source:h.Fail}),!1}else return A}let a;return t.createElement(F,{style:e.container},t.createElement(x,{title:"IMPORT"},t.createElement(l,{style:e.importBackup,label:"Import from backup",subLabel:"Import installed addons from backup that linked to your discord account.",leading:t.createElement(l.Icon,{source:h.Import}),trailing:l.Arrow,onPress:()=>{kt("1048982327809818706").then(i=>{let w=b(i,"No backup was found.");w&&(y(w),N.open({content:"Successfully imported addons from backup!",source:h.Check}))})}})),t.createElement(x,null,t.createElement(xt,{style:e.importText,ref:i=>{a=i},placeholder:"Paste exported text",onSubmitEditing:i=>{let w=b(i.nativeEvent.text);w&&y(w)}}),t.createElement(l,{label:"Clear Input",trailing:l.Arrow,onPress:()=>{a.clear(),s({"":{}}),p({"":{}})}})),t.createElement(x,{title:"PLUGINS"},Object.keys(r).map(i=>r[i].url?t.createElement(l,{label:r[i].version?`${i} - v${r[i].version}`:i,subLabel:r[i].description,leading:r[i].installed?t.createElement(l.Icon,{source:h.Check}):t.createElement(l.Icon,{source:h.Download}),trailing:r[i].installed?void 0:l.Arrow,onPress:()=>{K(i,n[i].url,()=>{let w=Object.assign({},r);w[i].installed=!0,s(w)})}}):t.createElement(l,{label:"There are no imported plugins yet"}))),t.createElement(x,{title:"THEMES"},Object.keys(m).map(i=>m[i].url?t.createElement(l,{label:m[i].version?`${i} - v${m[i].version}`:i,subLabel:m[i].description,leading:m[i].installed?t.createElement(l.Icon,{source:h.Check}):t.createElement(l.Icon,{source:h.Download}),trailing:m[i].installed?void 0:l.Arrow,onPress:()=>{re(i,o[i].url,()=>{let w=Object.assign({},m);w[i].installed=!0,p(w)})}}):t.createElement(l,{label:"There are no imported themes yet"}))))}const Lt="https://github.com/m4fn3/AddonManager",Bt="https://raw.githubusercontent.com/m4fn3/AddonManager/master/manifest.json",Ot="https://raw.githubusercontent.com/m4fn3/AddonManager/master/dist/AddonManager.js",Ft="https://raw.githubusercontent.com/m4fn3/AddonManager/master/changelogs.json";function Ue(e,n){window.enmity.plugins.installPlugin(Ot,()=>{oe.show({title:"AddonManager",body:`Updated from ${e} to ${n}!
Do you want to reload Discord now?`,confirmText:"Yes",cancelText:"Later",onConfirm:()=>Dt()})})}function Ut(e=!1){D.get(Bt).then(n=>{const o=JSON.parse(n.text),r=k(o.name);o.version.localeCompare(r.version,void 0,{numeric:!0})===1?(e||!e&&T(g,"ignored",null)!=o.version)&&D.get(Ft).then(s=>{const m=JSON.parse(s.text);let p="";m[o.version]&&(p=`

- Changelogs
${m[o.version]}`),oe.show({title:"AddonManager",body:`New version v${o.version} is available!${p}`,confirmText:"Update",cancelText:"Ignore",onConfirm:()=>{E(g,"_updating",!0),Ue(r.version,o.version)},onCancel:()=>E(g,"ignored",o.version)})}):e?oe.show({title:"AddonManager",body:`You are using latest version v${r.version}!`,confirmText:"OK"}):E(g,"ignored",null)}).catch(n=>{n.status===404&&oe.show({title:"AddonManager",body:"Failed to check for updates. Please check GitHub manually.",confirmText:"GitHub",cancelText:"Close",onConfirm:()=>J.openURL(Lt)})})}const jt=ue("HelpMessage"),te=ce.createStackNavigator();function je(){return t.createElement(te.Navigator,{initialRouteName:"Home",headerMode:"screen",screenOptions:{...Ct}},t.createElement(te.Screen,{name:"Home",component:He,options:{headerShown:!1}}),[[Le,"Plugins"],[Be,"Themes"],[Ae,"Export"],[Fe,"Import"],[Oe,"Update"]].map(([e,n])=>t.createElement(te.Screen,{name:n,component:e})),t.createElement(te.Screen,{name:"PluginDetail",component:()=>t.createElement(W,{addonType:"plugin"}),options:{title:""}}),t.createElement(te.Screen,{name:"ThemeDetail",component:()=>t.createElement(W,{addonType:"theme"}),options:{title:""}}))}function He({settings:e,renderPage:n}){const o=P.createThemedStyleSheet({container:{backgroundColor:u.ThemeColorMap.BACKGROUND_PRIMARY},header:{flexDirection:"row",justifyContent:"center",alignItems:"center"},image:{width:70,height:70,marginTop:20,marginLeft:20},title:{flexDirection:"column"},notice:{marginTop:30,marginLeft:20,marginRight:20},name:{fontSize:30,paddingTop:20,paddingLeft:20,paddingRight:30,color:u.ThemeColorMap.HEADER_PRIMARY},author:{fontSize:15,paddingLeft:50,color:u.ThemeColorMap.HEADER_SECONDARY},info:{height:45,paddingTop:3,paddingBottom:3,justifyContent:"center",alignItems:"center"},footer:{color:u.ThemeColorMap.HEADER_SECONDARY,textAlign:"center",paddingTop:10,paddingBottom:20}}),r=Z.useNavigation();return t.useEffect(()=>{D.get(G(gt)).then(s=>{E(g,"compatibility",s.text)})},[]),t.createElement(F,{style:o.container},t.createElement(ie,{style:o.header},t.createElement(Ie,{source:{uri:"https://avatars.githubusercontent.com/u/43488869"},style:o.image}),t.createElement(ie,{style:o.title},t.createElement(R,{style:o.name},"AddonManager"),t.createElement(R,{style:o.author},"by mafu"))),T(g,"ignored",null)?t.createElement(ie,{style:o.notice},t.createElement(jt,{messageType:0},t.createElement(R,{style:o.author,onPress:()=>{const s=k(g);Ue(s.version,T(g,"ignored",null))}},"New version of AddonManager is available! Click here to update."))):t.createElement(t.Fragment,null),t.createElement(x,{title:"STORE"},t.createElement(l,{label:"Browse plugins",leading:t.createElement($e,{width:24,height:24}),trailing:l.Arrow,onPress:()=>{e?n(r,{pageName:"Plugins",pagePanel:()=>t.createElement(Le,{isSetting:!0,renderPage:n})}):r.navigate("Plugins")}}),t.createElement(l,{label:"Browse themes",leading:t.createElement(ke,{width:24,height:24}),trailing:l.Arrow,onPress:()=>{e?n(r,{pageName:"Themes",pagePanel:()=>t.createElement(Be,{isSetting:!0,renderPage:n})}):r.navigate("Themes")}}),t.createElement(l,{label:"Export addons",leading:t.createElement(l.Icon,{source:h.Export}),trailing:l.Arrow,onPress:()=>{e?n(r,{pageName:"Export",pagePanel:Ae}):r.navigate("Export")}}),t.createElement(l,{label:"Import addons",leading:t.createElement(l.Icon,{source:h.Import}),trailing:l.Arrow,onPress:()=>{e?n(r,{pageName:"Import",pagePanel:Fe}):r.navigate("Import")}}),t.createElement(l,{label:"Update addons",leading:t.createElement(l.Icon,{source:h.Update}),trailing:l.Arrow,onPress:()=>{e?n(r,{pageName:"Update",pagePanel:()=>t.createElement(Oe,{isSetting:!0,renderPage:n})}):r.navigate("Update")}})),t.createElement(x,{title:"INFORMATION"},t.createElement(l,{label:"Follow me on Twitter",style:o.info,trailing:l.Arrow,leading:t.createElement(l.Icon,{source:h.Twitter}),onPress:()=>{J.openURL("https://twitter.com/m4fn3")}}),t.createElement(l,{label:"Visit my server for help",style:o.info,trailing:l.Arrow,leading:t.createElement(l.Icon,{source:h.Discord}),onPress:()=>{vt.acceptInviteAndTransitionToInviteChannel({inviteKey:"TrCqPTCrdq",context:{location:"Invite Button Embed"},callback:()=>{r.pop()}})}}),t.createElement(l,{label:"Check Source on GitHub",style:o.info,trailing:l.Arrow,leading:t.createElement(l.Icon,{source:h.GitHub}),onPress:()=>{J.openURL("https://github.com/m4fn3/AddonManager")}})),t.createElement(R,{style:o.footer},`v${Se}`))}var Ge;(function(e){e[e.BuiltIn=0]="BuiltIn",e[e.Guild=1]="Guild",e[e.DM=2]="DM"})(Ge||(Ge={}));var be;(function(e){e[e.Chat=1]="Chat",e[e.User=2]="User",e[e.Message=3]="Message"})(be||(be={}));var Ye;(function(e){e[e.BuiltIn=0]="BuiltIn",e[e.BuiltInText=1]="BuiltInText",e[e.BuiltInIntegration=2]="BuiltInIntegration",e[e.Bot=3]="Bot",e[e.Placeholder=4]="Placeholder"})(Ye||(Ye={}));var Ve;(function(e){e[e.Role=1]="Role",e[e.User=2]="User"})(Ve||(Ve={}));var Ke;(function(e){e[e.SubCommand=1]="SubCommand",e[e.SubCommandGroup=2]="SubCommandGroup",e[e.String=3]="String",e[e.Integer=4]="Integer",e[e.Boolean=5]="Boolean",e[e.User=6]="User",e[e.Channel=7]="Channel",e[e.Role=8]="Role",e[e.Mentionnable=9]="Mentionnable",e[e.Number=10]="Number",e[e.Attachment=11]="Attachment"})(Ke||(Ke={}));var ze;(function(e){e[e.ApplicationCommand=2]="ApplicationCommand",e[e.MessageComponent=3]="MessageComponent"})(ze||(ze={}));const We=ce.createStackNavigator();var Ht=({name:e="AddonManager",component:n=ie,detail:o=null}={})=>{const r=P.createThemedStyleSheet({container:{backgroundColor:u.ThemeColorMap.BACKGROUND_MOBILE_SECONDARY,flex:1},cardStyle:{backgroundColor:u.ThemeColorMap.BACKGROUND_MOBILE_PRIMARY,color:u.ThemeColorMap.TEXT_NORMAL},header:{backgroundColor:u.ThemeColorMap.BACKGROUND_MOBILE_SECONDARY,shadowColor:"transparent",elevation:0},headerText:{color:u.ThemeColorMap.HEADER_PRIMARY},headerButton:{color:u.ThemeColorMap.HEADER_PRIMARY}});let s,m;return o&&(m=T(m,"_selected_plugin").toString(),s=k(m)),t.createElement(ot.NavigationContainer,{independent:!0},t.createElement(We.Navigator,{initialRouteName:e,style:r.container,screenOptions:{cardOverlayEnabled:!1,cardShadowEnabled:!1,cardStyle:r.cardStyle,headerStyle:r.header,headerTitleAlign:"center",safeAreaInsets:{top:0}}},t.createElement(We.Screen,{name:e,component:n,options:{headerTitleStyle:{color:"white"},headerLeft:()=>t.createElement(_e,{color:r.headerButton.color,title:"Close",onPress:()=>X.pop()}),headerRight:()=>o?t.createElement(_e,{color:r.headerButton.color,title:s?"Uninstall":"Install",onPress:()=>{if(s)ge(m,()=>X.pop());else{const p=Y();K(m,p[m].url,()=>X.pop())}}}):t.createElement(t.Fragment,null),...ce.TransitionPresets.ModalPresentationIOS}})))};const[Gt,Yt,Vt]=yt(me.byName("MessagesConnected",!1),me.byName("MessagesWrapperConnected",!1),me.byProps("openPrivateChannel")),{Platform:{isPad:Xe}}=V("View","Text");let ve=!1;const Kt=C("ic_information_24px"),Je="643945264868098049";function qe(){N.open({content:"nvm. It is the normal behaviour on iPad as of now.",source:Kt}),ve=!0,setTimeout(()=>{Vt.openPrivateChannel(Je)},100)}const Ze=rt("AddonManager"),Qe={...st,onStart(){const e={id:"addon",name:"addon",displayName:"addon",description:"Open AddonManager",displayDescription:"Open AddonManager",type:be.Chat,execute:async function(o,r){Xe?qe():X.push(Ht,{component:je,name:"AddonManager"})}};this.commands=[e];const n=Gt||Yt;Ze.after(n,"default",(o,r,s)=>{var m,p;if(ve&&((p=(m=r[0].channel)==null?void 0:m.recipients)==null?void 0:p.includes(Je)))return t.createElement(je,null);ve=!1}),T(g,"check_updates_me",!0)&&(T(g,"_updating",!1)?E(g,"_updating",!1):Ut()),["plugin","theme"].forEach(o=>_t(o)),wt(),Et(),It()},onStop(){Ze.unpatchAll()},renderPage(e,{pageName:n,pagePanel:o}){var r;return(r=e==null?void 0:e.push)==null?void 0:r.call(e,"EnmityCustomPage",{pageName:n,pagePanel:o})},getSettingsPanel({settings:e}){return Xe&&(X.pop(),qe()),t.createElement(He,{settings:e,renderPage:Qe.renderPage})}};tt(Qe);
